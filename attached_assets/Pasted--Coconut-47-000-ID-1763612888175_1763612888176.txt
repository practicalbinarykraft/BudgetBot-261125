üìã –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø: –ú–£–õ–¨–¢–ò–í–ê–õ–Æ–¢–ù–´–ï –¶–ï–ù–´

üéØ –ü–†–û–ë–õ–ï–ú–ê
–°–ï–ô–ß–ê–° (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
–ß–µ–∫: Coconut = 47,000 IDR
  ‚Üì (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ)
–ë–î: price = 2.82, currency = USD
  ‚Üì
UI: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç $47,000 ‚ùå –ë–†–ï–î!

–î–û–õ–ñ–ù–û –ë–´–¢–¨:
–ß–µ–∫: Coconut = 47,000 IDR
  ‚Üì
–ë–î: priceOriginal = 47000, currencyOriginal = IDR
    priceUsd = 2.82
  ‚Üì
UI: Rp47,000.00 ‚úÖ
    ‚âà $2.82 USD ‚úÖ

üìä –≠–¢–ê–ü 1: –û–ë–ù–û–í–ò–¢–¨ DATABASE SCHEMA (15 –º–∏–Ω—É—Ç)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ó–ê–î–ê–ß–ê 1.1: –î–û–ë–ê–í–ò–¢–¨ –ü–û–õ–Ø –î–õ–Ø –ò–°–•–û–î–ù–û–ô –í–ê–õ–Æ–¢–´
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–§–ê–ô–õ: shared/schemas/product-catalog/price-history.schema.ts

–ù–ê–ô–¢–ò:
export const productPriceHistory = pgTable('product_price_history', {
  id: serial('id').primaryKey(),
  productId: integer('product_id').references(() => productCatalog.id, { onDelete: 'cascade' }).notNull(),
  
  storeName: text('store_name').notNull(),
  storeAddress: text('store_address'),
  
  // –°—Ç–∞—Ä—ã–µ –ø–æ–ª—è (–æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  price: decimal('price', { precision: 10, scale: 2 }).notNull(),
  currency: varchar('currency', { length: 3 }).default('USD'),
  
  purchaseDate: text('purchase_date').notNull(),
  transactionId: integer('transaction_id').references(() => dailyTransactions.id),
  
  createdAt: timestamp('created_at').defaultNow()
});

–î–û–ë–ê–í–ò–¢–¨ –ü–û–°–õ–ï currency:

  // –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏
  priceOriginal: decimal('price_original', { precision: 12, scale: 2 }),
  currencyOriginal: varchar('currency_original', { length: 3 }),
  exchangeRate: decimal('exchange_rate', { precision: 10, scale: 4 }),

–ò–¢–û–ì–û–í–ê–Ø –°–•–ï–ú–ê:

export const productPriceHistory = pgTable('product_price_history', {
  id: serial('id').primaryKey(),
  productId: integer('product_id').references(() => productCatalog.id, { onDelete: 'cascade' }).notNull(),
  
  storeName: text('store_name').notNull(),
  storeAddress: text('store_address'),
  
  // USD —Ü–µ–Ω–∞ (–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
  price: decimal('price', { precision: 10, scale: 2 }).notNull(),
  currency: varchar('currency', { length: 3 }).default('USD'),
  
  // –ò–°–•–û–î–ù–ê–Ø —Ü–µ–Ω–∞ –∏–∑ —á–µ–∫–∞
  priceOriginal: decimal('price_original', { precision: 12, scale: 2 }),
  currencyOriginal: varchar('currency_original', { length: 3 }),
  exchangeRate: decimal('exchange_rate', { precision: 10, scale: 4 }),
  
  purchaseDate: text('purchase_date').notNull(),
  transactionId: integer('transaction_id').references(() => dailyTransactions.id),
  
  createdAt: timestamp('created_at').defaultNow()
});

–ó–ê–ü–£–°–¢–ò–¢–¨ –ú–ò–ì–†–ê–¶–ò–Æ:
npm run db:push

–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:
‚úÖ 3 –Ω–æ–≤—ã—Ö –ø–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –æ—Å—Ç–∞–ª–∏—Å—å (backward compatible)
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞