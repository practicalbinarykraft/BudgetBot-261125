ШАГ 24: ОБНОВИТЬ РАСЧЁТ КАПИТАЛА НА DASHBOARD
typescript═══════════════════════════════════════════════════════
ЗАДАЧА: Обновить виджет "Общий капитал" (кошельки + активы - пассивы)
ФАЙЛ: client/src/pages/dashboard.tsx (или главная страница)
ИЗМЕНЕНИЙ: ~20 строк
═══════════════════════════════════════════════════════

НАЙДИ ФАЙЛ: client/src/pages/dashboard.tsx

НАЙДИ ГДЕ РАССЧИТЫВАЕТСЯ ОБЩИЙ КАПИТАЛ:
Обычно это что-то вроде:
const totalCapital = walletsBalance;

ДОБАВЬ ЗАПРОС К NET WORTH (если ещё нет):
const { data: netWorthSummary } = useQuery({
  queryKey: ['/api/assets/summary'],
  queryFn: async () => {
    const res = await fetch('/api/assets/summary');
    if (!res.ok) return null;
    const json = await res.json();
    return json.data;
  }
});

ОБНОВИ РАСЧЁТ КАПИТАЛА:
// Старый расчёт (только кошельки)
const totalCapital = walletsBalance;

// НОВЫЙ расчёт (кошельки + активы - пассивы)
const totalCapital = 
  walletsBalance + 
  (netWorthSummary?.totalAssets || 0) - 
  (netWorthSummary?.totalLiabilities || 0);

// Или более кратко:
const totalCapital = walletsBalance + (netWorthSummary?.netWorth || 0);

НАЙДИ ВИДЖЕТ/КАРТОЧКУ С ОТОБРАЖЕНИЕМ КАПИТАЛА:
<div className="bg-white rounded-lg shadow p-6">
  <h3 className="text-sm text-gray-600 mb-2">Общий капитал</h3>
  <p className="text-3xl font-bold">
    ${totalCapital.toLocaleString('en-US', { maximumFractionDigits: 0 })}
  </p>
</div>

ДОБАВЬ РАЗБИВКУ (ОПЦИОНАЛЬНО):
<div className="bg-white rounded-lg shadow p-6">
  <h3 className="text-sm text-gray-600 mb-2">Общий капитал</h3>
  <p className="text-3xl font-bold mb-4">
    ${totalCapital.toLocaleString('en-US', { maximumFractionDigits: 0 })}
  </p>
  
  {/* Разбивка */}
  <div className="space-y-2 text-sm">
    <div className="flex justify-between">
      <span className="text-gray-600">Кошельки:</span>
      <span className="font-medium">${walletsBalance.toLocaleString()}</span>
    </div>
    
    {netWorthSummary && (
      <>
        <div className="flex justify-between">
          <span className="text-gray-600">Активы:</span>
          <span className="font-medium text-green-600">
            +${netWorthSummary.totalAssets.toLocaleString()}
          </span>
        </div>
        
        <div className="flex justify-between">
          <span className="text-gray-600">Пассивы:</span>
          <span className="font-medium text-red-600">
            -${netWorthSummary.totalLiabilities.toLocaleString()}
          </span>
        </div>
      </>
    )}
  </div>
</div>

ПРОВЕРКА:
✅ Капитал рассчитывается правильно
✅ Формула: кошельки + активы - пассивы
✅ Виджет показывает разбивку
✅ Цифры соответствуют реальности