ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸, Ñƒ Ğ½Ğ°Ñ ĞµÑÑ‚ÑŒ Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹, Ğ½Ğ¾ Ğ½ĞµÑ‚ Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ñ… Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ¾Ğ². Ğ•ÑĞ»Ğ¸ Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ñƒ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ° Ğ½ĞµÑ‚ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ° Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ°, ĞµÑÑ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ° Ğ¼ĞµÑÑÑ†-Ğ´Ğ²Ğ°, Ğ¾Ğ½ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼ Ñ„Ñ€Ğ¸Ğ»Ğ°Ğ½ÑĞµÑ€, Ñ‚Ğ¾ Ğ¾Ğ½ Ğ½Ğµ ÑĞ¼Ğ¾Ğ¶ĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½. Ğ’Ğ°Ğ¶Ğ½Ğ¾ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑÑ‚Ğ¸ Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ğ»Ğ¸ÑÑŒ Ğ² Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğ¸ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ² Ğ¸ Ğ² Ğ˜Ğ˜ Ñ‚ÑƒĞ»ÑĞ°Ñ…. Ğ—Ğ°ĞºÑ€Ñ‹Ğ» ÑĞ´ĞµĞ»ĞºÑƒ Ñ„Ñ€Ğ¸Ğ»Ğ°Ğ½ÑĞµÑ€, Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ» Ğ±Ğ¾Ñ‚Ñƒ "Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ 1000$ 22 Ğ½Ğ¾ÑĞ±Ñ€Ñ" Ñ‚Ğ¾Ğ³Ğ´Ğ° Ğ˜Ğ˜ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶, ĞµÑĞ»Ğ¸ Ğ²ÑĞµ Ğ¾Ğº Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ. Ğ’ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞµ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ñ… Ñ‚Ñ€ĞµĞ½Ğ´Ğ¾Ğ² Ğ±ÑƒĞ´ĞµÑ‚ Ñ„Ğ¸Ğ³ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ° Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ Ğ¸ Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€Ğ½Ñ‹Ğ¹ Ğ·ĞµĞ»ĞµĞ½Ñ‹Ğ¹ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº Ğ²Ñ‹Ñ€Ğ°ÑÑ‚ĞµÑ‚. ĞĞ¾ Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ¾Ğ¼ Ğ² Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞµ Ñ‚Ğ°Ğº Ğ¶Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑŒÑÑ Ğ²ÑĞµ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸. ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑÑ‰Ğ¸ĞµÑÑ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸ (ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ°Ğ»ĞºĞ°, Ğ°Ñ€ĞµĞ½Ğ´Ğ°, ĞµĞ´Ğ°) Ñ‚Ğ¾ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ¸Ğ· ÑĞ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ñ… Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹ Ğ¸ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑÑ‰Ğ¸Ñ…ÑÑ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ². ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑˆÑŒ?

ĞŸÑ€Ğ¾Ğ´ÑƒĞ¼Ğ°Ğ¹ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ²ÑÑ‘ Ñ‡Ñ‚Ğ¾ Ñ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ» Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‚ÑŒ Ğ¢Ğ— Ñ€ĞµĞ¿Ğ»Ğ¸Ñ‚Ñƒ

Show more
ğŸ’¡ ĞĞ¢Ğ›Ğ˜Ğ§ĞĞĞ¯ Ğ˜Ğ”Ğ•Ğ¯! ĞŸĞ ĞĞ”Ğ£ĞœĞ«Ğ’ĞĞ® Ğ”Ğ•Ğ¢ĞĞ›Ğ¬ĞĞ
ğŸ¯ Ğ¡Ğ£Ğ¢Ğ¬ ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ«
Ğ¡Ğ•Ğ™Ğ§ĞĞ¡:
â”œâ”€ Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ ĞĞ¡Ğ¥ĞĞ”Ğ« âœ…
â”‚  â””â”€ Future purchases (Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸)
â”‚
â””â”€ Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ”ĞĞ¥ĞĞ”Ğ« âŒ
   â””â”€ ĞĞ•Ğ¢!

ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ:
Ğ¤Ñ€Ğ¸Ğ»Ğ°Ğ½ÑĞµÑ€ Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑÑ‹:
- ĞĞµÑ‚ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ñ‹
- Ğ”Ğ¾Ñ…Ğ¾Ğ´ = Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ² Ñ€Ğ°Ğ·Ğ½ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ
- Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº Ğ½Ğµ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹
ğŸ¨ ĞĞĞ’ĞĞ¯ Ğ¤Ğ˜Ğ§Ğ: PLANNED INCOME
1. Ğ§Ğ¢Ğ Ğ”ĞĞ‘ĞĞ’Ğ›Ğ¯Ğ•Ğœ
Ğ¡Ğ£Ğ©ĞĞĞ¡Ğ¢Ğ¬: Planned Income
(Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹)

ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ«:
â”œâ”€ "ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ¾Ñ‚ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ·Ğ° ÑĞ°Ğ¹Ñ‚ - 1000$ - 22 Ğ½Ğ¾ÑĞ±Ñ€Ñ"
â”œâ”€ "Ğ¤Ñ€Ğ¸Ğ»Ğ°Ğ½Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½ - 500â‚¬ - 5 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ"
â”œâ”€ "Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ´Ğ¾Ğ»Ğ³Ğ° Ğ¾Ñ‚ Ğ´Ñ€ÑƒĞ³Ğ° - 200$ - 15 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ"
â””â”€ "Ğ‘Ğ¾Ğ½ÑƒÑ Ğ¾Ñ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ - 300$ - 1 ÑĞ½Ğ²Ğ°Ñ€Ñ"

ĞĞ¢Ğ›Ğ˜Ğ§Ğ˜Ğ• ĞĞ¢ RECURRING:
Recurring = Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑÑ‰Ğ¸ĞµÑÑ (Ğ·Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¼ĞµÑÑÑ†)
Planned = Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ (Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ· Ğ² ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ)
2. Ğ¡Ğ¥Ğ•ĞœĞ Ğ‘Ğ”
typescript
// shared/schema.ts

export const plannedIncome = pgTable('planned_income', {
  id: serial('id').primaryKey(),
  userId: integer('user_id').references(() => users.id, { onDelete: 'cascade' }),
  
  // ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ
  amount: decimal('amount', { precision: 10, scale: 2 }).notNull(),
  currency: varchar('currency', { length: 3 }).default('USD'),
  description: text('description').notNull(),
  category: text('category'), // ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
  
  // Ğ”Ğ°Ñ‚Ğ°
  expectedDate: text('expected_date').notNull(), // YYYY-MM-DD
  
  // Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
  status: text('status').default('pending'), // 'pending', 'received', 'cancelled'
  
  // Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸ĞµĞ¹ (ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ Ğ´ĞµĞ½ÑŒĞ³Ğ¸)
  transactionId: integer('transaction_id').references(() => dailyTransactions.id),
  receivedAt: timestamp('received_at'),
  
  // ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  source: text('source').default('manual'), // 'manual', 'ai', 'telegram'
  notes: text('notes'),
  
  createdAt: timestamp('created_at').defaultNow(),
  updatedAt: timestamp('updated_at').defaultNow()
});

export type PlannedIncome = typeof plannedIncome.$inferSelect;
export type InsertPlannedIncome = typeof plannedIncome.$inferInsert;
```

---

### **3. UI ĞšĞĞœĞŸĞĞĞ•ĞĞ¢Ğ«**
```
ĞĞĞ’ĞĞ¯ Ğ¡Ğ¢Ğ ĞĞĞ˜Ğ¦Ğ: /planned-income

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹              â”‚
â”‚                                     â”‚
â”‚ [Ğ’ÑĞµĞ³Ğ¾ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ: $2,500]           â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ 22 Ğ½Ğ¾ÑĞ±Ñ€Ñ - $1,000         â”‚     â”‚
â”‚ â”‚ ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ·Ğ° ÑĞ°Ğ¹Ñ‚             â”‚     â”‚
â”‚ â”‚ [ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾] [ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ]      â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ 5 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ - 500â‚¬           â”‚     â”‚
â”‚ â”‚ Ğ¤Ñ€Ğ¸Ğ»Ğ°Ğ½Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚             â”‚     â”‚
â”‚ â”‚ [ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾] [ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ]      â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                     â”‚
â”‚ [+ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ¤Ğ˜Ğ›Ğ¬Ğ¢Ğ Ğ«:
â”œâ”€ Ğ’ÑĞµ
â”œâ”€ ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğµ (status=pending)
â”œâ”€ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğµ (status=received)
â””â”€ ĞÑ‚Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ñ‹Ğµ (status=cancelled)

Ğ¡ĞĞ Ğ¢Ğ˜Ğ ĞĞ’ĞšĞ:
â””â”€ ĞŸĞ¾ Ğ´Ğ°Ñ‚Ğµ (Ğ¾Ñ‚ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ñ… Ğº Ğ´Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¼)
4. AI TOOL: CREATE_PLANNED_INCOME
typescript
// server/ai/tools.ts

{
  name: 'create_planned_income',
  description: 'Create a planned one-time income with expected date',
  requiresConfirmation: true, // WRITE Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ
  input_schema: {
    type: 'object' as const,
    properties: {
      amount: { 
        type: 'number', 
        description: 'Expected income amount' 
      },
      description: { 
        type: 'string', 
        description: 'Income description (e.g., "Payment from client for website")' 
      },
      expectedDate: { 
        type: 'string', 
        description: 'Expected date in YYYY-MM-DD format or natural language (e.g., "22 Ğ½Ğ¾ÑĞ±Ñ€Ñ", "next Friday")' 
      },
      currency: { 
        type: 'string', 
        description: 'Currency code (USD, EUR, RUB, etc). Optional, defaults to user settings.' 
      },
      category: { 
        type: 'string', 
        description: 'Income category. Optional.' 
      }
    },
    required: ['amount', 'description', 'expectedDate']
  }
}

// server/ai/handlers/planned-income-handler.ts

export async function handleCreatePlannedIncome(
  userId: number,
  params: {
    amount: number;
    description: string;
    expectedDate: string;
    currency?: string;
    category?: string;
  }
): Promise<ToolResult> {
  try {
    // ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ´Ğ°Ñ‚Ñ‹ (ĞµÑĞ»Ğ¸ natural language)
    const parsedDate = parseNaturalDate(params.expectedDate);
    
    // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ: Ğ´Ğ°Ñ‚Ğ° Ğ² Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¼?
    if (new Date(parsedDate) < new Date()) {
      return {
        success: false,
        error: 'Expected date must be in the future'
      };
    }
    
    // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ planned income
    const plannedIncome = await repositories.plannedIncome.create({
      userId,
      amount: params.amount,
      description: params.description,
      expectedDate: parsedDate,
      currency: params.currency || 'USD',
      category: params.category,
      status: 'pending',
      source: 'ai'
    });
    
    return {
      success: true,
      data: {
        id: plannedIncome.id,
        amount: plannedIncome.amount,
        description: plannedIncome.description,
        expectedDate: plannedIncome.expectedDate
      }
    };
  } catch (error: any) {
    return {
      success: false,
      error: error.message
    };
  }
}

// Helper: Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ natural language Ğ´Ğ°Ñ‚
function parseNaturalDate(input: string): string {
  // "22 Ğ½Ğ¾ÑĞ±Ñ€Ñ" â†’ "2025-11-22"
  // "next Friday" â†’ "2025-11-29"
  // "Ğ² ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº" â†’ "2025-11-25"
  
  // ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ chrono-node
  // Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ¿Ğ°Ñ€ÑĞµÑ€
  
  // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:
  const ruMonths = {
    'ÑĞ½Ğ²Ğ°Ñ€Ñ': 1, 'Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ': 2, 'Ğ¼Ğ°Ñ€Ñ‚Ğ°': 3,
    'Ğ°Ğ¿Ñ€ĞµĞ»Ñ': 4, 'Ğ¼Ğ°Ñ': 5, 'Ğ¸ÑĞ½Ñ': 6,
    'Ğ¸ÑĞ»Ñ': 7, 'Ğ°Ğ²Ğ³ÑƒÑÑ‚Ğ°': 8, 'ÑĞµĞ½Ñ‚ÑĞ±Ñ€Ñ': 9,
    'Ğ¾ĞºÑ‚ÑĞ±Ñ€Ñ': 10, 'Ğ½Ğ¾ÑĞ±Ñ€Ñ': 11, 'Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ': 12
  };
  
  const match = input.match(/(\d+)\s+(ÑĞ½Ğ²Ğ°Ñ€Ñ|Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ|Ğ¼Ğ°Ñ€Ñ‚Ğ°|...)/i);
  if (match) {
    const day = parseInt(match[1]);
    const month = ruMonths[match[2].toLowerCase()];
    const year = new Date().getFullYear();
    return `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
  }
  
  // Ğ•ÑĞ»Ğ¸ ÑƒĞ¶Ğµ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ YYYY-MM-DD
  if (/^\d{4}-\d{2}-\d{2}$/.test(input)) {
    return input;
  }
  
  throw new Error('Invalid date format');
}
5. Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ¯ Ğ’ Ğ“Ğ ĞĞ¤Ğ˜ĞšĞ˜
typescript
// server/services/trend-calculator.service.ts

export async function calculateTrendWithPlannedIncome(params: {
  userId: number;
  historyDays: number;
  forecastDays: number;
}) {
  // 1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹ (ĞºĞ°Ğº ÑĞµĞ¹Ñ‡Ğ°Ñ)
  const transactions = await getTransactions(...);
  
  // 2. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ recurring Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ (ĞºĞ°Ğº ÑĞµĞ¹Ñ‡Ğ°Ñ)
  const recurring = await getRecurringTransactions(userId);
  
  // 3. ĞĞĞ’ĞĞ•: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ planned income
  const plannedIncomes = await repositories.plannedIncome.findByUser(userId, {
    status: 'pending'
  });
  
  // 4. ĞĞĞ’ĞĞ•: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ planned expenses (future purchases)
  const plannedExpenses = await repositories.futurePurchases.findByUser(userId, {
    status: 'planned'
  });
  
  // 5. ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ forecast Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ğ²ÑĞµÑ… Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²
  const forecast = [];
  
  for (let day = 0; day < forecastDays; day++) {
    const date = addDays(new Date(), day);
    
    // Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚Ñ€ĞµĞ½Ğ´ (Ğ¸Ğ· Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸)
    let income = calculateAverageIncome(transactions);
    let expense = calculateAverageExpense(transactions);
    
    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ recurring
    const recurringForDay = getRecurringForDate(recurring, date);
    income += recurringForDay.income;
    expense += recurringForDay.expense;
    
    // ĞĞĞ’ĞĞ•: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ planned income Ğ½Ğ° ÑÑ‚Ñƒ Ğ´Ğ°Ñ‚Ñƒ
    const plannedForDay = plannedIncomes.filter(p => 
      isSameDay(new Date(p.expectedDate), date)
    );
    income += plannedForDay.reduce((sum, p) => sum + parseFloat(p.amount), 0);
    
    // ĞĞĞ’ĞĞ•: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ planned expenses Ğ½Ğ° ÑÑ‚Ñƒ Ğ´Ğ°Ñ‚Ñƒ
    const expensesForDay = plannedExpenses.filter(p => 
      isSameDay(new Date(p.targetDate), date)
    );
    expense += expensesForDay.reduce((sum, p) => sum + parseFloat(p.amount), 0);
    
    // Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞºĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ»
    const netChange = income - expense;
    const capital = (forecast[day - 1]?.capital || currentCapital) + netChange;
    
    forecast.push({
      date: formatDate(date),
      income,
      expense,
      capital,
      
      // ĞĞĞ’ĞĞ•: ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ UI
      hasPlannedIncome: plannedForDay.length > 0,
      hasPlannedExpense: expensesForDay.length > 0,
      plannedIncomeItems: plannedForDay,
      plannedExpenseItems: expensesForDay
    });
  }
  
  return forecast;
}
6. ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ• Ğ“Ğ ĞĞ¤Ğ˜ĞšĞ
typescript
// client/src/components/capital-growth-chart.tsx

// Ğ›Ğ¸Ğ½Ğ¸Ğ¸ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ°:
// 1. ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ‚Ñ€ĞµĞ½Ğ´ (ÑĞ¿Ğ»Ğ¾ÑˆĞ½Ğ°Ñ ÑĞ¸Ğ½ÑÑ) - ĞºĞ°Ğº ÑĞµĞ¹Ñ‡Ğ°Ñ
// 2. Recurring Ñ‚Ñ€ĞµĞ½Ğ´ (Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€ ÑĞµÑ€Ñ‹Ğ¹) - ĞºĞ°Ğº ÑĞµĞ¹Ñ‡Ğ°Ñ
// 3. ĞĞĞ’ĞĞ•: Planned income (Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€ Ğ·ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹)
// 4. ĞĞĞ’ĞĞ•: Planned expenses (Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€ ĞºÑ€Ğ°ÑĞ½Ñ‹Ğ¹)
// 5. ĞĞĞ’ĞĞ•: Combined forecast (Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€ Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ñ‹Ğ¹)

const chartData = forecast.map(day => ({
  date: day.date,
  capital: day.capital,
  
  // ĞĞĞ’ĞĞ•: ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ»Ğ¸Ğ½Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²
  capitalWithPlannedIncome: day.capital + day.plannedIncomeTotal,
  capitalWithPlannedExpenses: day.capital - day.plannedExpenseTotal,
  capitalCombined: day.capital + day.plannedIncomeTotal - day.plannedExpenseTotal
}));

<LineChart data={chartData}>
  {/* ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ‚Ñ€ĞµĞ½Ğ´ */}
  <Line 
    type="monotone" 
    dataKey="capital" 
    stroke="#3b82f6" 
    strokeWidth={2}
  />
  
  {/* ĞĞĞ’ĞĞ•: Planned income */}
  <Line 
    type="monotone" 
    dataKey="capitalWithPlannedIncome" 
    stroke="#10b981" 
    strokeWidth={2}
    strokeDasharray="5 5"
  />
  
  {/* ĞĞĞ’ĞĞ•: Planned expenses */}
  <Line 
    type="monotone" 
    dataKey="capitalWithPlannedExpenses" 
    stroke="#ef4444" 
    strokeWidth={2}
    strokeDasharray="5 5"
  />
  
  {/* ĞĞĞ’ĞĞ•: Combined forecast */}
  <Line 
    type="monotone" 
    dataKey="capitalCombined" 
    stroke="#8b5cf6" 
    strokeWidth={3}
    strokeDasharray="10 5"
  />
</LineChart>

// Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°:
<div className="flex gap-4 text-sm">
  <div>
    <span className="inline-block w-4 h-0.5 bg-blue-500" /> 
    Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ñ‚Ñ€ĞµĞ½Ğ´
  </div>
  <div>
    <span className="inline-block w-4 h-0.5 bg-green-500" 
          style={{ borderTop: '2px dashed' }} /> 
    Ğ¡ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¼Ğ¸ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ°Ğ¼Ğ¸
  </div>
  <div>
    <span className="inline-block w-4 h-0.5 bg-red-500" 
          style={{ borderTop: '2px dashed' }} /> 
    Ğ¡ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¼Ğ¸ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ°Ğ¼Ğ¸
  </div>
  <div>
    <span className="inline-block w-4 h-0.5 bg-purple-500" 
          style={{ borderTop: '2px dashed' }} /> 
    ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·
  </div>
</div>
7. ĞœĞĞ ĞšĞ•Ğ Ğ« ĞĞ Ğ“Ğ ĞĞ¤Ğ˜ĞšĞ•
typescript
// ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ½Ğ° Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞµ Ğ³Ğ´Ğµ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‚ÑÑ planned income/expenses

<ComposedChart>
  {/* ... Ğ»Ğ¸Ğ½Ğ¸Ğ¸ ĞºĞ°Ğº Ğ²Ñ‹ÑˆĞµ ... */}
  
  {/* ĞĞĞ’ĞĞ•: ĞœĞ°Ñ€ĞºĞµÑ€Ñ‹ planned income */}
  <Scatter 
    data={plannedIncomeMarkers} 
    fill="#10b981"
    shape="circle"
  >
    <Tooltip content={<PlannedIncomeTooltip />} />
  </Scatter>
  
  {/* ĞĞĞ’ĞĞ•: ĞœĞ°Ñ€ĞºĞµÑ€Ñ‹ planned expenses */}
  <Scatter 
    data={plannedExpenseMarkers} 
    fill="#ef4444"
    shape="triangle"
  >
    <Tooltip content={<PlannedExpenseTooltip />} />
  </Scatter>
</ComposedChart>

// Tooltip:
function PlannedIncomeTooltip({ payload }) {
  if (!payload?.length) return null;
  
  const item = payload[0].payload;
  
  return (
    <div className="bg-white p-3 rounded shadow-lg border">
      <p className="text-sm font-medium text-green-600">
        ğŸ’° ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´
      </p>
      <p className="text-xs">{item.description}</p>
      <p className="text-sm font-bold">${item.amount}</p>
      <p className="text-xs text-gray-500">{item.date}</p>
    </div>
  );
}
8. ĞšĞĞĞŸĞšĞ "ĞŸĞĞ›Ğ£Ğ§Ğ˜Ğ› Ğ”Ğ•ĞĞ¬Ğ“Ğ˜"
typescript
// ĞšĞ¾Ğ³Ğ´Ğ° Ñ„Ñ€Ğ¸Ğ»Ğ°Ğ½ÑĞµÑ€ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ:

async function markAsReceived(plannedIncomeId: number) {
  // 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ€ĞµĞ°Ğ»ÑŒĞ½ÑƒÑ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ
  const plannedIncome = await getPlannedIncome(plannedIncomeId);
  
  const transaction = await repositories.transactions.create({
    userId: plannedIncome.userId,
    amount: plannedIncome.amount,
    description: plannedIncome.description,
    category: plannedIncome.category,
    type: 'income',
    date: new Date().toISOString().split('T')[0],
    source: 'planned_income'
  });
  
  // 2. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ planned income ÑÑ‚Ğ°Ñ‚ÑƒÑ
  await repositories.plannedIncome.update(plannedIncomeId, {
    status: 'received',
    transactionId: transaction.id,
    receivedAt: new Date()
  });
  
  // 3. ĞŸĞµÑ€ĞµÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº
  await recalculateTrend(plannedIncome.userId);
}

// UI:
<button
  onClick={() => markAsReceived(item.id)}
  className="px-3 py-1 bg-green-500 text-white rounded"
>
  âœ… ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ´ĞµĞ½ÑŒĞ³Ğ¸
</button>
```

---

## ğŸ“‹ ĞŸĞĞ›ĞĞĞ• Ğ¢Ğ— Ğ”Ğ›Ğ¯ REPLIT
```
Ğ—ĞĞ”ĞĞ§Ğ: Ğ”ĞĞ‘ĞĞ’Ğ˜Ğ¢Ğ¬ PLANNED INCOME (Ğ—ĞĞŸĞ›ĞĞĞ˜Ğ ĞĞ’ĞĞĞĞ«Ğ• Ğ ĞĞ—ĞĞ’Ğ«Ğ• Ğ”ĞĞ¥ĞĞ”Ğ«)

ĞšĞĞĞ¢Ğ•ĞšĞ¡Ğ¢:
Ğ¤Ñ€Ğ¸Ğ»Ğ°Ğ½ÑĞµÑ€Ñ‹ Ğ½Ğµ Ğ¸Ğ¼ĞµÑÑ‚ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ°. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ = Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶ Ğ² 
ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ. ĞÑƒĞ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹ Ğ¸ 
ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ñ… Ğ² Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ñ… Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ°Ñ….

ĞŸĞ Ğ˜ĞœĞ•Ğ  USE CASE:
User (Ñ„Ñ€Ğ¸Ğ»Ğ°Ğ½ÑĞµÑ€): "ĞĞ¶Ğ¸Ğ´Ğ°Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ 1000$ 22 Ğ½Ğ¾ÑĞ±Ñ€Ñ Ğ·Ğ° ÑĞ°Ğ¹Ñ‚"
AI: [ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ]
    - Amount: 1000
    - Description: "ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ·Ğ° ÑĞ°Ğ¹Ñ‚"
    - Expected Date: 2025-11-22
    - [Execute] [Cancel]
User: [Execute]
AI: "âœ… Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½!"

Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ:
- Ğ—ĞµĞ»Ñ‘Ğ½Ğ°Ñ Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€Ğ½Ğ°Ñ Ğ»Ğ¸Ğ½Ğ¸Ñ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ· Ğ¡ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ°
- ĞĞ° 22 Ğ½Ğ¾ÑĞ±Ñ€Ñ Ğ½Ğ° Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞµ Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¼Ğ°Ñ€ĞºĞµÑ€ ğŸ’°
- ĞŸÑ€Ğ¾Ğ³Ğ½Ğ¾Ğ· ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ°Ğº planned income, Ñ‚Ğ°Ğº Ğ¸ recurring expenses

Ğ§Ğ¢Ğ ĞĞ£Ğ–ĞĞ Ğ¡Ğ”Ğ•Ğ›ĞĞ¢Ğ¬:

1. Ğ‘ĞĞ—Ğ Ğ”ĞĞĞĞ«Ğ¥ (20 Ğ¼Ğ¸Ğ½ÑƒÑ‚):
   
   Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ planned_income:
   - id (serial)
   - userId (FK users)
   - amount (decimal)
   - currency (varchar, default 'USD')
   - description (text)
   - category (text, optional)
   - expectedDate (text, YYYY-MM-DD)
   - status (text: 'pending', 'received', 'cancelled')
   - transactionId (FK dailyTransactions, optional)
   - receivedAt (timestamp, optional)
   - source (text: 'manual', 'ai', 'telegram')
   - notes (text, optional)
   - createdAt, updatedAt (timestamps)

2. REPOSITORY (30 Ğ¼Ğ¸Ğ½ÑƒÑ‚):
   
   Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ server/repositories/planned-income.repository.ts:
   - findByUser(userId, filters?)
   - create(data)
   - update(id, data)
   - delete(id)
   - markAsReceived(id) - ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ Ğ¸ Ğ¼ĞµĞ½ÑĞµÑ‚ status

3. AI TOOL (40 Ğ¼Ğ¸Ğ½ÑƒÑ‚):
   
   Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ tool 'create_planned_income':
   - ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹: amount, description, expectedDate, currency?, category?
   - requiresConfirmation: true
   - Handler: server/ai/handlers/planned-income-handler.ts
   
   Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:
   - handleCreatePlannedIncome(userId, params)
   - parseNaturalDate(input) - Ğ¿Ğ°Ñ€ÑĞ¸Ñ‚ "22 Ğ½Ğ¾ÑĞ±Ñ€Ñ" â†’ "2025-11-22"
   
   ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ñ„Ñ€Ğ°Ğ· Ğ´Ğ»Ñ AI:
   - "ĞĞ¶Ğ¸Ğ´Ğ°Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ 1000$ 22 Ğ½Ğ¾ÑĞ±Ñ€Ñ"
   - "ĞŸĞ¾Ğ»ÑƒÑ‡Ñƒ Ğ´ĞµĞ½ÑŒĞ³Ğ¸ 500â‚¬ Ğ² ÑĞ»ĞµĞ´ÑƒÑÑ‰ÑƒÑ Ğ¿ÑÑ‚Ğ½Ğ¸Ñ†Ñƒ"
   - "ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ·Ğ°Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ 2000 Ñ€ÑƒĞ±Ğ»ĞµĞ¹ 5 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ"

4. Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ¯ Ğ’ TREND CALCULATOR (1 Ñ‡Ğ°Ñ):
   
   ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ server/services/trend-calculator.service.ts:
   - Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒ plannedIncome (status='pending')
   - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ² forecast Ğ½Ğ° ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ´Ğ°Ñ‚Ñ‹
   - Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (hasPlannedIncome, plannedIncomeItems)
   
   Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ°:
   capitalCombined = baseCapital 
                   + recurringIncome 
                   + plannedIncome 
                   - recurringExpenses 
                   - plannedExpenses

5. UI: Ğ“Ğ ĞĞ¤Ğ˜Ğš (1 Ñ‡Ğ°Ñ):
   
   ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ client/src/components/capital-growth-chart.tsx:
   - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ğ½Ğ¸Ñ "Ğ¡ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¼Ğ¸ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ°Ğ¼Ğ¸" (Ğ·ĞµĞ»Ñ‘Ğ½Ğ°Ñ Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€)
   - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ğ½Ğ¸Ñ "ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·" (Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ğ°Ñ Ğ¿ÑƒĞ½ĞºÑ‚Ğ¸Ñ€)
   - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Scatter Ğ¼Ğ°Ñ€ĞºĞµÑ€Ñ‹ Ğ½Ğ° Ğ´Ğ°Ñ‚Ñ‹ planned income
   - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Tooltip Ñ Ğ´ĞµÑ‚Ğ°Ğ»ÑĞ¼Ğ¸
   - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ»ĞµĞ³ĞµĞ½Ğ´Ñƒ

6. UI: Ğ¡Ğ¢Ğ ĞĞĞ˜Ğ¦Ğ PLANNED INCOME (1 Ñ‡Ğ°Ñ):
   
   Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ client/src/pages/planned-income.tsx:
   - Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº planned income (ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ Ğ´Ğ°Ñ‚Ğµ)
   - Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹: Ğ’ÑĞµ, ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğµ, ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğµ, ĞÑ‚Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ñ‹Ğµ
   - ĞšĞ½Ğ¾Ğ¿ĞºĞ° [+ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´]
   - ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸:
     * [âœ… ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ´ĞµĞ½ÑŒĞ³Ğ¸] - markAsReceived()
     * [âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ] - status='cancelled'
   
   UI ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ’° 22 Ğ½Ğ¾ÑĞ±Ñ€Ñ - $1,000           â”‚
   â”‚ ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ·Ğ° ÑĞ°Ğ¹Ñ‚                  â”‚
   â”‚ [âœ… ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ğ»] [âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ]      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

7. MENU (5 Ğ¼Ğ¸Ğ½ÑƒÑ‚):
   
   Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² sidebar:
   â”œâ”€ ... ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¿ÑƒĞ½ĞºÑ‚Ñ‹
   â”œâ”€ ğŸ’° Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹  â† ĞĞĞ’ĞĞ•
   â””â”€ ...

8. I18N (20 Ğ¼Ğ¸Ğ½ÑƒÑ‚):
   
   Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹:
   en.json:
   "plannedIncome": {
     "title": "Planned Income",
     "addIncome": "Add Income",
     "expectedTotal": "Total expected",
     "markReceived": "Mark as Received",
     "cancel": "Cancel",
     "received": "Received",
     "pending": "Pending",
     "cancelled": "Cancelled"
   }
   
   ru.json:
   "plannedIncome": {
     "title": "Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹",
     "addIncome": "Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´",
     "expectedTotal": "Ğ’ÑĞµĞ³Ğ¾ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ",
     "markReceived": "ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ´ĞµĞ½ÑŒĞ³Ğ¸",
     "cancel": "ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ",
     "received": "ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾",
     "pending": "ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ",
     "cancelled": "ĞÑ‚Ğ¼ĞµĞ½ĞµĞ½Ğ¾"
   }

Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- Ğ’ÑĞµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ <200 ÑÑ‚Ñ€Ğ¾Ğº (Junior-Friendly)
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ repositories (Ğ½Ğµ Ğ¿Ñ€ÑĞ¼Ñ‹Ğµ SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹)
- TypeScript strict
- i18n Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²
- ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ UI

Ğ¢Ğ•Ğ¡Ğ¢Ğ«:
1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ planned income Ñ‡ĞµÑ€ĞµĞ· AI: "ĞĞ¶Ğ¸Ğ´Ğ°Ñ 1000$ 22 Ğ½Ğ¾ÑĞ±Ñ€Ñ"
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾ÑĞ²Ğ¸Ğ»ÑÑ Ğ½Ğ° Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞµ (Ğ·ĞµĞ»Ñ‘Ğ½Ğ°Ñ Ğ»Ğ¸Ğ½Ğ¸Ñ, Ğ¼Ğ°Ñ€ĞºĞµÑ€)
3. ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ [ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ´ĞµĞ½ÑŒĞ³Ğ¸] â†’ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ
4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ğ»ÑÑ (Ğ¼Ğ°Ñ€ĞºĞµÑ€ Ğ¸ÑÑ‡ĞµĞ·, ĞºĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ» Ğ²Ñ‹Ñ€Ğ¾Ñ)

Ğ˜Ğ¢ĞĞ“Ğ: ~4 Ñ‡Ğ°ÑĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹
Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢: Ğ¤Ñ€Ğ¸Ğ»Ğ°Ğ½ÑĞµÑ€Ñ‹ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹ + AI tool
```

---

## ğŸ¯ Ğ˜Ğ¢ĞĞ“Ğ
```
ĞĞĞ’ĞĞ¯ Ğ¤Ğ˜Ğ§Ğ: PLANNED INCOME

Ğ¤ĞĞ™Ğ›Ğ« (8 Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ², ~1200 ÑÑ‚Ñ€Ğ¾Ğº):
â”œâ”€ Schema: planned_income table
â”œâ”€ Repository: planned-income.repository.ts (~150 ÑÑ‚Ñ€Ğ¾Ğº)
â”œâ”€ AI Handler: planned-income-handler.ts (~100 ÑÑ‚Ñ€Ğ¾Ğº)
â”œâ”€ Service: Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ trend-calculator (~100 ÑÑ‚Ñ€Ğ¾Ğº Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ)
â”œâ”€ Page: planned-income.tsx (~200 ÑÑ‚Ñ€Ğ¾Ğº)
â”œâ”€ Chart: capital-growth-chart.tsx (~150 ÑÑ‚Ñ€Ğ¾Ğº Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ)
â”œâ”€ Tooltip: planned-income-tooltip.tsx (~50 ÑÑ‚Ñ€Ğ¾Ğº)
â””â”€ i18n: translations (~50 ÑÑ‚Ñ€Ğ¾Ğº)

Ğ’Ğ Ğ•ĞœĞ¯: ~4 Ñ‡Ğ°ÑĞ°

Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢:
âœ… Ğ¤Ñ€Ğ¸Ğ»Ğ°Ğ½ÑĞµÑ€Ñ‹ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹
âœ… AI ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ planned income
âœ… Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹
âœ… ĞœĞ°Ñ€ĞºĞµÑ€Ñ‹ Ğ½Ğ° Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞµ
âœ… ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ´ĞµĞ½ÑŒĞ³Ğ¸" â†’ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ