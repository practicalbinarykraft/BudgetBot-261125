üîç –ü–†–û–ë–õ–ï–ú–ê
–¢–í–û–Å –°–û–û–ë–©–ï–ù–ò–ï:
"–ø–µ–ø–∏—Ç–æ
—Ö–ª–µ–± 5,000
–º–æ–ª–æ–∫–æ 12,000
—è–π—Ü–∞ 18,000"

–ë–û–¢ –†–ê–°–ü–ê–†–°–ò–õ:
—Ö–ª–µ–± –º–æ–ª–æ–∫–æ 12,000
—è–π—Ü–∞ 18,000
–°—É–º–º–∞: $5.00  ‚Üê –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!

–ü–†–û–ë–õ–ï–ú–ê:
1. –ù–µ –ø–∞—Ä—Å–∏—Ç –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É —Å —Ü–µ–Ω–æ–π (—Ö–ª–µ–± 5,000)
2. –ó–∞–ø—è—Ç—ã–µ –≤ —á–∏—Å–ª–∞—Ö –º–µ—à–∞—é—Ç (5,000)
3. –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –±–µ–∑ ":" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ USD –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è

üîß –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï
–û–¢–ü–†–ê–í–¨ REPLIT:

---

–ò—Å–ø—Ä–∞–≤—å –±–∞–≥–∏ –≤ shopping list –ø–∞—Ä—Å–µ—Ä–µ:

–ü–†–û–ë–õ–ï–ú–ê 1: –ó–∞–ø—è—Ç—ã–µ –≤ —á–∏—Å–ª–∞—Ö
–í —Ñ–∞–π–ª–µ server/telegram/shopping-list-parser.ts
–≤ —Ñ—É–Ω–∫—Ü–∏–∏ parseShoppingList():

–ù–ê–ô–¢–ò:
const match = cleaned.match(/^(.+?)\s*:?\s*(\d+[–∫k]?|\d+,\d+)$/i);

–ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê:
// –£–±—Ä–∞—Ç—å –∑–∞–ø—è—Ç—ã–µ –∏ –ø—Ä–æ–±–µ–ª—ã –∏–∑ —á–∏—Å–µ–ª
const cleanedLine = line
  .replace(/^[-‚Ä¢]\s*/, '')  // —É–±—Ä–∞—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å—ã
  .replace(/,/g, '')         // —É–±—Ä–∞—Ç—å –∑–∞–ø—è—Ç—ã–µ –∏–∑ —á–∏—Å–µ–ª
  .trim();

// –§–æ—Ä–º–∞—Ç: "—Ç–æ–≤–∞—Ä —á–∏—Å–ª–æ" –∏–ª–∏ "—Ç–æ–≤–∞—Ä: —á–∏—Å–ª–æ"
const match = cleanedLine.match(/^(.+?)\s*:?\s*(\d+[–∫k]?)$/i);

–ü–†–û–ë–õ–ï–ú–ê 2: –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –±–µ–∑ –¥–≤–æ–µ—Ç–æ—á–∏—è
–ü–∞—Ä—Å–µ—Ä —Ç—Ä–µ–±—É–µ—Ç "–ú–∞–≥–∞–∑–∏–Ω:" –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ.

–ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ ":" - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –º–∞–≥–∞–∑–∏–Ω,
–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∫–∞–∫ —Ç–æ–≤–∞—Ä—ã.

–î–û–ë–ê–í–ò–¢–¨ –í –ù–ê–ß–ê–õ–û parseShoppingList():

const lines = text.split('\n').map(l => l.trim()).filter(l => l.length > 0);

if (lines.length === 0) return null;

// –ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –ë–ï–ó —Ü–∏—Ñ—Ä - —ç—Ç–æ –º–∞–≥–∞–∑–∏–Ω
const firstLine = lines[0];
let merchant: string;
let itemLines: string[];

if (!/\d/.test(firstLine)) {
  // –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ = –º–∞–≥–∞–∑–∏–Ω, –æ—Å—Ç–∞–ª—å–Ω—ã–µ = —Ç–æ–≤–∞—Ä—ã
  merchant = firstLine;
  itemLines = lines.slice(1);
} else if (firstLine.includes(':')) {
  // –§–æ—Ä–º–∞—Ç "–ú–∞–≥–∞–∑–∏–Ω: —Ç–æ–≤–∞—Ä —Ü–µ–Ω–∞, —Ç–æ–≤–∞—Ä —Ü–µ–Ω–∞"
  const colonIndex = firstLine.indexOf(':');
  merchant = firstLine.substring(0, colonIndex).trim();
  const rest = firstLine.substring(colonIndex + 1).trim();
  itemLines = [rest, ...lines.slice(1)];
} else {
  // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
  return null;
}

// –¢–µ–ø–µ—Ä—å –ø–∞—Ä—Å–∏—Ç—å itemLines...

–ü–†–û–ë–õ–ï–ú–ê 3: USD –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
–ù–µ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ exchangeRate!

–í server/telegram/commands.ts –≥–¥–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è:

–ù–ê–ô–¢–ò:
amountUsd: shoppingList.total / exchangeRate,

–ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê:
amountUsd: parseFloat((shoppingList.total / exchangeRate).toFixed(2)),

–ò –¥–ª—è receipt items:

–ù–ê–ô–¢–ò:
amountUsd: item.price.toString(),

–ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê:
amountUsd: parseFloat((item.price / exchangeRate).toFixed(2)),

–†–ï–ó–£–õ–¨–¢–ê–¢:
‚úÖ "–ø–µ–ø–∏—Ç–æ\n—Ö–ª–µ–± 5,000" ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ó–∞–ø—è—Ç—ã–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
‚úÖ USD –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è
‚úÖ –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

---