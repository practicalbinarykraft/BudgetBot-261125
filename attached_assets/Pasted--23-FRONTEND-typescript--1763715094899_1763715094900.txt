ШАГ 23: ОБНОВИТЬ FRONTEND ГРАФИК
typescript═══════════════════════════════════════════════════════
ЗАДАЧА: Загрузить данные активов в график
ФАЙЛ: client/src/components/trend-chart.tsx (или аналогичный)
ИЗМЕНЕНИЙ: ~30 строк
═══════════════════════════════════════════════════════

НАЙДИ КОМПОНЕНТ ГРАФИКА

ДОБАВЬ ЗАПРОС К API:
import { useQuery } from '@tanstack/react-query';

// Получить историю активов
const { data: assetsHistory } = useQuery({
  queryKey: ['/api/assets/history'],
  queryFn: async () => {
    const res = await fetch('/api/assets/history');
    if (!res.ok) return [];
    const json = await res.json();
    return json.data;
  }
});

ОБЪЕДИНИ ДАННЫЕ КОШЕЛЬКОВ И АКТИВОВ:
// Получить данные кошельков (существующий код)
const walletsData = await fetchWalletsHistory(); // ваш существующий код

// Объединить с данными активов
const chartData = walletsData.map((wallet: any) => {
  // Найти соответствующую запись в истории активов
  const assetsDataPoint = assetsHistory?.find(
    (a: any) => a.date === wallet.date
  );
  
  return {
    date: wallet.date,
    wallets: wallet.balance,
    assetsValue: assetsDataPoint?.assets || 0,
    liabilitiesValue: assetsDataPoint?.liabilities || 0,
    netAssetsValue: assetsDataPoint?.netWorth || 0,
    totalCapital: wallet.balance + (assetsDataPoint?.netWorth || 0)
  };
});

ОБНОВИ ГРАФИК:
<ResponsiveContainer width="100%" height={300}>
  <LineChart data={chartData}>
    <CartesianGrid strokeDasharray="3 3" />
    <XAxis 
      dataKey="date" 
      tickFormatter={(date) => {
        const d = new Date(date);
        return d.toLocaleDateString('ru-RU', { month: 'short', year: '2-digit' });
      }}
    />
    <YAxis 
      tickFormatter={(value) => `$${(value / 1000).toFixed(0)}K`}
    />
    <Tooltip 
      formatter={(value: number) => `$${value.toLocaleString('en-US', { maximumFractionDigits: 0 })}`}
      labelFormatter={(date) => {
        const d = new Date(date);
        return d.toLocaleDateString('ru-RU', { month: 'long', year: 'numeric' });
      }}
    />
    <Legend />
    
    {/* Линия кошельков (синяя) */}
    {showWalletsLine && (
      <Line 
        type="monotone" 
        dataKey="wallets" 
        stroke="#3b82f6" 
        strokeWidth={2}
        name="Кошельки"
        dot={{ r: 3 }}
      />
    )}
    
    {/* Линия активов (оранжевая, пунктир) */}
    {showAssetsLine && (
      <Line 
        type="monotone" 
        dataKey="netAssetsValue" 
        stroke="#f97316" 
        strokeWidth={2}
        strokeDasharray="5 5"
        name="Активы и пассивы"
        dot={{ r: 3 }}
      />
    )}
    
    {/* Опционально: линия общего капитала (зелёная) */}
    {showTotalLine && (
      <Line 
        type="monotone" 
        dataKey="totalCapital" 
        stroke="#10b981" 
        strokeWidth={3}
        name="Общий капитал"
        dot={{ r: 4 }}
      />
    )}
  </LineChart>
</ResponsiveContainer>

ДОБАВЬ ЕЩЁ ОДИН ЧЕКБОКС (ОПЦИОНАЛЬНО):
<label className="flex items-center gap-2 cursor-pointer">
  <input
    type="checkbox"
    checked={showTotalLine}
    onChange={(e) => setShowTotalLine(e.target.checked)}
    className="w-4 h-4"
  />
  <span className="flex items-center gap-1">
    <span className="w-3 h-3 bg-green-500 rounded-full"></span>
    <span className="text-sm font-semibold">Общий капитал</span>
  </span>
</label>

ПРОВЕРКА:
✅ График загружается
✅ Оранжевая линия отображается
✅ Данные корректны (активы - пассивы)
✅ Легенда показывает все линии
✅ Tooltip показывает значения