ЗАДАЧА 2.4: UI INTEGRATION (1 час)
ЦЕЛЬ: Добавить кнопку "Scan Receipt" в AI Analysis

ЧТО ДЕЛАТЬ:
Обновить файл: client/src/pages/ai-analysis-page.tsx

НАЙТИ блок "Receipt OCR Scanner" (~строка 150):
<Card>
  <CardHeader>
    <CardTitle>Receipt OCR Scanner</CardTitle>
  </CardHeader>
  <CardContent>
    <Button disabled>
      Scan Receipt (Coming Soon)
    </Button>
  </CardContent>
</Card>

ЗАМЕНИТЬ НА:
<Card>
  <CardHeader>
    <CardTitle className="flex items-center gap-2">
      <Camera className="h-5 w-5" />
      Receipt OCR Scanner
    </CardTitle>
    <CardDescription>
      Upload a receipt to automatically extract items and prices
    </CardDescription>
  </CardHeader>
  <CardContent>
    <div className="space-y-4">
      <Input
        type="file"
        accept="image/*"
        onChange={handleReceiptUpload}
        ref={fileInputRef}
        className="hidden"
      />
      
      <Button 
        onClick={() => fileInputRef.current?.click()}
        disabled={uploadMutation.isPending}
      >
        {uploadMutation.isPending ? (
          <>
            <Loader2 className="mr-2 h-4 w-4 animate-spin" />
            Scanning...
          </>
        ) : (
          <>
            <Camera className="mr-2 h-4 w-4" />
            Upload Receipt
          </>
        )}
      </Button>
      
      {uploadResult && (
        <div className="mt-4 p-4 bg-green-50 rounded-lg">
          <p className="text-sm font-medium text-green-900">
            ✓ Receipt scanned successfully!
          </p>
          <p className="text-xs text-green-700 mt-1">
            Found {uploadResult.itemsCount} items from {uploadResult.receipt.merchant}
          </p>
        </div>
      )}
    </div>
  </CardContent>
</Card>

ДОБАВИТЬ В НАЧАЛО КОМПОНЕНТА:
const fileInputRef = useRef<HTMLInputElement>(null);
const [uploadResult, setUploadResult] = useState<any>(null);

const uploadMutation = useMutation({
  mutationFn: async (file: File) => {
    // Конвертировать в base64
    const base64 = await fileToBase64(file);
    
    // Отправить на сервер
    const response = await fetch('/api/ai/receipt-with-items', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ imageBase64: base64 })
    });
    
    if (!response.ok) throw new Error('Failed to parse receipt');
    return response.json();
  },
  onSuccess: (data) => {
    setUploadResult(data);
    toast.success(`Scanned ${data.itemsCount} items!`);
  },
  onError: (error) => {
    toast.error('Failed to scan receipt');
  }
});

const handleReceiptUpload = (e: React.ChangeEvent<HTMLInputElement>) => {
  const file = e.target.files?.[0];
  if (file) uploadMutation.mutate(file);
};

// Helper
function fileToBase64(file: File): Promise<string> {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => {
      const base64 = reader.result as string;
      resolve(base64.split(',')[1]); // убрать "data:image/jpeg;base64,"
    };
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

ИМПОРТЫ (добавить):
import { Camera, Loader2 } from 'lucide-react';
import { useRef, useState } from 'react';

ФАЙЛЫ:
└─ client/src/pages/ai-analysis-page.tsx (обновить)

РАЗМЕР: +80 строк

БЕЗОПАСНОСТЬ:
✅ Заменяем только один блок
✅ Не трогаем другие части страницы