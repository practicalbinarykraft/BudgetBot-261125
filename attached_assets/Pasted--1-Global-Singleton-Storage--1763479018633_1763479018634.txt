üî¥ –ß–¢–û –°–î–ï–õ–ê–ù–û –ü–õ–û–•–û (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´)

  1. Global Singleton Storage (–°–∞–º–∞—è –±–æ–ª—å—à–∞—è –ø—Ä–æ–±–ª–µ–º–∞)

  –¢–æ—á–Ω–æ —Ç–∞–∫–∞—è –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ –∫–∞–∫ –≤ ReelRepurposer - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç storage –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 31+ —Ñ–∞–π–ª–∞—Ö:

  // server/storage.ts - –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç –Ω–∞ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  export const storage = {
    async getTransactionsByUserId(userId: number) { ... },
    async getCategories() { ... },
    // ... –µ—â—ë 50+ –º–µ—Ç–æ–¥–æ–≤
  }

  –ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ:
  - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–Ω–µ–ª—å–∑—è –∑–∞–º–æ–∫–∞—Ç—å)
  - –ù–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)
  - –í—Å–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ - —Ö—Ä—É–ø–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
  - –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å —á—Ç–æ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

  –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: 31 —Ñ–∞–π–ª –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç storage –Ω–∞–ø—Ä—è–º—É—é.

  2. –ì–∏–≥–∞–Ω—Ç—Å–∫–∏–π —Ñ–∞–π–ª server/telegram/commands.ts (1,485 —Å—Ç—Ä–æ–∫!)

  –û–¥–∏–Ω —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–Æ –ª–æ–≥–∏–∫—É Telegram –±–æ—Ç–∞ - –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–∞–Ω–¥, –≤–∞–ª–∏–¥–∞—Ü–∏—é, —Ä–∞–±–æ—Ç—É —Å –ë–î, AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é.

  –ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ñ–∞–π–ª–∞:
  - /start –∫–æ–º–∞–Ω–¥–∞ - 50+ —Å—Ç—Ä–æ–∫
  - /add –∫–æ–º–∞–Ω–¥–∞ - 200+ —Å—Ç—Ä–æ–∫ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º, –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, AI
  - /stats –∫–æ–º–∞–Ω–¥–∞ - 100+ —Å—Ç—Ä–æ–∫ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–º–∏ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏
  - AI integration –ª–æ–≥–∏–∫–∞ –ø—Ä—è–º–æ –≤ —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö

  –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: –†–∞–∑–¥–µ–ª–µ–Ω–æ –Ω–∞ services, handlers, parsers.

  3. Direct Database Queries –≤ Route Handlers

  // server/routes/analytics.routes.ts:76
  const allPlanned = await storage.getPlannedByUserId(userId);
  const planned = allPlanned.filter(item => item.type === 'goal');

  // –ü—Ä—è–º–æ –≤ —Ä–æ—É—Ç–µ –¥–µ–ª–∞–µ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, –º–∞–ø–ø–∏–Ω–≥, AI –≤—ã–∑–æ–≤—ã
  const goals = planned
    .map((goal) => {
      const prediction = calculateGoalPrediction(/* ... */);
      return { ...goal, prediction, derivedPriority: /* calc */ };
    })
    .filter((item) => item.prediction?.monthsToAfford !== null);

  –ü—Ä–æ–±–ª–µ–º–∞: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä—è–º–æ –≤ —Ä–æ—É—Ç–∞—Ö, –∞ –Ω–µ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö.

  4. No Error Handling Pattern

  –ù–∏–≥–¥–µ –Ω–µ—Ç Result Pattern. –û—à–∏–±–∫–∏ –ø—Ä–æ—Å—Ç–æ throw-–∞—é—Ç—Å—è –∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –≥–¥–µ-—Ç–æ –Ω–∞–≤–µ—Ä—Ö—É:

  // server/services/tag.service.ts
  export async function deleteTag(tagId: number) {
    await db.delete(tags).where(eq(tags.id, tagId));
    // –ê –µ—Å–ª–∏ —Ç–µ–≥ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç? –ê –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö?
    // –û—à–∏–±–∫–∞ –ø—Ä–æ—Å—Ç–æ —É–ª–µ—Ç–∏—Ç –≤ generic error handler
  }

  5. Mixed Abstraction Levels

  // server/telegram/commands.ts
  bot.onText(/\/add (.+)/, async (msg, match) => {
    // High-level: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã
    const parsedData = parseAddCommand(text); // –ø–∞—Ä—Å–∏–Ω–≥

    // Low-level: –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –≤–Ω—É—Ç—Ä–∏ —Ö—ç–Ω–¥–ª–µ—Ä–∞
    const categories = await storage.getCategories();
    const wallets = await storage.getWalletsByUserId(userId);

    // Mid-level: –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞
    if (!matchedCategory) {
      matchedCategory = suggestCategory(description);
    }

    // Low-level: –æ–ø—è—Ç—å –ø—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î
    await storage.createTransaction({ ... });
  });

  ---
  üü¢ –ß–¢–û –°–î–ï–õ–ê–ù–û –•–û–†–û–®–û

  1. –û—Ç–ª–∏—á–Ω–∞—è i18n –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è Telegram –±–æ—Ç–∞

  // server/telegram/i18n.ts
  export type Language = 'en' | 'ru';

  const translations: Translations = {
    'welcome.title': {
      en: 'üëã Welcome to Budget Buddy!',
      ru: 'üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Budget Buddy!',
    },
    // 100+ –ø–µ—Ä–µ–≤–æ–¥–æ–≤, —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ
  }

  export function t(key: string, lang: Language): string {
    return translations[key]?.[lang] || key;
  }

  –ü–ª—é—Å—ã:
  - Type-safe –∫–ª—é—á–∏
  - –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
  - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏
  - Fallback –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π

  2. Repository Pattern –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

  // server/repositories/receipt-items.repository.ts
  class ReceiptItemsRepository {
    async create(item: NewReceiptItem): Promise<ReceiptItem> { ... }
    async findByTransactionId(transactionId: number): Promise<ReceiptItem[]> { ... }
    // –•–æ—Ä–æ—à–∞—è –∏–∑–æ–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
  }

  –•–æ—Ä–æ—à–æ, –Ω–æ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–Ω–µ –≤–µ–∑–¥–µ).

  3. Separation of Concerns –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö

  // server/services/trend-calculator.service.ts
  export async function calculateTrend(params: TrendCalculationParams) {
    // –ß—ë—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–æ —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è
    // –†–∞–∑–±–∏—Ç–æ –Ω–∞ —à–∞–≥–∏
    // –®–ê–ì 1: –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
    // –®–ê–ì 2: –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é
    // –®–ê–ì 3: –°–¥–µ–ª–∞—Ç—å –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–º–∏
    // –®–ê–ì 4: AI –ø—Ä–æ–≥–Ω–æ–∑
    // –®–ê–ì 5: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å
  }

  4. Type Safety —Å Zod –∏ Drizzle

  // shared/schema.ts
  export const insertTransactionSchema = createInsertSchema(transactions);
  export type NewTransaction = z.infer<typeof insertTransactionSchema>;

  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Zod –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ + —Ç–∏–ø—ã –∏–∑ —Å—Ö–µ–º—ã –ë–î - –æ—Ç–ª–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥.

  5. AI Integration –ø—Ä–æ–¥—É–º–∞–Ω–∞

  // server/ai/chat-with-tools.ts
  // –•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è AI
  // Smart category detection
  // Currency detection

  ---
  üî• –ì–õ–ê–í–ù–´–ô –í–û–ü–†–û–°: –ü–û–ß–ï–ú–£ –ü–û–õ–û–í–ò–ù–ê –ù–ê –†–£–°–°–ö–û–ú, –ü–û–õ–û–í–ò–ù–ê –ù–ê –ê–ù–ì–õ–ò–ô–°–ö–û–ú?

  –í–æ—Ç —á—Ç–æ —è –Ω–∞—à—ë–ª:

  –†–µ–∞–ª—å–Ω–æ—Å—Ç—å:

  1. Web-–∫–ª–∏–µ–Ω—Ç (client/):
    - ‚úÖ 100% –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º - –≤–µ—Å—å UI, –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    - –ù–∞—à—ë–ª —Ç–æ–ª—å–∫–æ –ø–∞—Ä—É —Ä—É—Å—Å–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    - –ù–∏–∫–∞–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –ù–ï–¢
  2. Telegram –±–æ—Ç:
    - ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –±–∏–ª–∏–Ω–≥–≤–∞–ª—å–Ω–æ—Å—Ç—å (English + Russian)
    - –ï—Å—Ç—å server/telegram/i18n.ts —Å 100+ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
    - –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —è–∑—ã–∫ —á–µ—Ä–µ–∑ /language
  3. –ö–æ–¥ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏):
    - üî¥ –ú–∏–∫—Å —Ä—É—Å—Å–∫–∏—Ö –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    - –ü—Ä–∏–º–µ—Ä: // –¢–∏–ø—ã –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –±—é–¥–∂–µ—Ç–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤
    - –ü—Ä–∏–º–µ—Ä: // Junior-friendly: <100 —Å—Ç—Ä–æ–∫, –ø–æ–Ω—è—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã
  4. –û–¥–∏–Ω –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ç–µ–≥:
    - üî¥ –ï—Å—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –Ω–∞ —Ä—É—Å—Å–∫–æ–º: name: '–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞' (server/services/tag.service.ts:128)

  –í–´–í–û–î: –ü–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ–∏–∑–æ—à–ª–æ?

  –ì–∏–ø–æ—Ç–µ–∑–∞ 1: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–ª–∞—Å—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —Ä–µ–ª–∏–∑ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
  - –ö–æ–¥ –ø–∏—Å–∞–ª—Å—è —Å —Ä—É—Å—Å–∫–∏–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ (–¥–ª—è —Å–µ–±—è/–∫–æ–º–∞–Ω–¥—ã)
  - Web UI —Å–¥–µ–ª–∞–ª–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –¥–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - Telegram –±–æ—Ç —Å–¥–µ–ª–∞–ª–∏ –±–∏–ª–∏–Ω–≥–≤–∞–ª—å–Ω—ã–º —Ç.–∫. –æ–∂–∏–¥–∞–ª–∏ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ó–∞–±—ã–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å i18n –≤ web-–∫–ª–∏–µ–Ω—Ç

  –ì–∏–ø–æ—Ç–µ–∑–∞ 2: Telegram –±–æ—Ç –±—ã–ª –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
  - –°–Ω–∞—á–∞–ª–∞ –±—ã–ª —Ç–æ–ª—å–∫–æ Telegram –±–æ—Ç (—Å i18n)
  - –ü–æ—Ç–æ–º –¥–æ–±–∞–≤–∏–ª–∏ web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–æ –Ω–µ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ i18n
  - –ü–æ—ç—Ç–æ–º—É web –æ—Å—Ç–∞–ª—Å—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

  –ì–∏–ø–æ—Ç–µ–∑–∞ 3: –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
  - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å i18n –≤ web, –Ω–æ –Ω–µ —É—Å–ø–µ–ª–∏
  - –ï—Å—Ç—å –¥–∞–∂–µ —Å–µ–ª–µ–∫—Ç–æ—Ä —è–∑—ã–∫–∞ –≤ Settings (client/src/pages/settings-page.tsx:256):
  <SelectItem value="ru">–†—É—Å—Å–∫–∏–π</SelectItem>
  - –ù–æ —Å–∞–º —Å–µ–ª–µ–∫—Ç–æ—Ä –ù–ï –†–ê–ë–û–¢–ê–ï–¢ - –Ω–µ—Ç —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞!

  –ö–∞–∫ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

  // –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å i18n –≤ –∫–ª–∏–µ–Ω—Ç, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Telegram –±–æ—Ç—É
  // client/src/i18n/translations.ts
  export const clientTranslations = {
    'dashboard.title': {
      en: 'Dashboard',
      ru: '–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
    },
    'dashboard.overview': {
      en: 'Overview of your finances',
      ru: '–û–±–∑–æ—Ä –≤–∞—à–∏—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤',
    },
    // ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –í–°–ï–• —Å—Ç—Ä–æ–∫
  }

  ---
  üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

  –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

  1. –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É i18n –∏–∑ Telegram –±–æ—Ç–∞ –≤ web-–∫–ª–∏–µ–Ω—Ç
  2. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π
  3. –°–≤—è–∑–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä —è–∑—ã–∫–∞ –≤ Settings —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
  4. –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (shared/i18n/)