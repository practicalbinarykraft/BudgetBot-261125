# üíé –û–¢–õ–ò–ß–ù–´–ï –í–û–ü–†–û–°–´! –û–¢–í–ï–ß–ê–Æ –î–ï–¢–ê–õ–¨–ù–û

---

## 1Ô∏è‚É£ –ü–û–í–¢–û–†–Ø–Æ–©–ò–ï–°–Ø –¢–†–ê–ù–ó–ê–ö–¶–ò–ò (RECURRING)

```
‚úÖ –¢–ê–ë–õ–ò–¶–ê –£–ñ–ï –ï–°–¢–¨!

// shared/schema.ts
export const recurringTransactions = pgTable('recurring_transactions', {
  id: serial('id').primaryKey(),
  userId: integer('user_id').references(() => users.id, { onDelete: 'cascade' }),
  partnerId: integer('partner_id').references(() => partners.id), // DEPRECATED
  
  // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
  type: text('type').notNull(), // 'income' | 'expense'
  amount: decimal('amount', { precision: 10, scale: 2 }).notNull(),
  description: text('description').notNull(),
  category: text('category'),
  
  // –ß–∞—Å—Ç–æ—Ç–∞
  frequency: text('frequency').notNull(), // 'daily' | 'weekly' | 'monthly' | 'yearly'
  startDate: text('start_date').notNull(), // YYYY-MM-DD
  endDate: text('end_date'), // optional
  
  // –°—Ç–∞—Ç—É—Å
  isActive: boolean('is_active').default(true),
  
  // Tier
  tier: varchar('tier', { length: 20 }).default('basic'),
  
  createdAt: timestamp('created_at').defaultNow(),
  updatedAt: timestamp('updated_at').defaultNow()
});

–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
‚úÖ –¢–∞–±–ª–∏—Ü–∞ —É–∂–µ –µ—Å—Ç—å
‚úÖ Repository –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)
‚úÖ –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞: getRecurringForDate(date)

–ö–ê–ö –†–ê–°–°–ß–ò–¢–´–í–ê–¢–¨ –î–õ–Ø –ü–†–û–ì–ù–û–ó–ê:
function getRecurringForDate(
  recurring: RecurringTransaction[], 
  date: Date
): { income: number; expense: number } {
  let income = 0;
  let expense = 0;
  
  for (const r of recurring) {
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ø–∞–¥–∞–µ—Ç –ª–∏ date –≤ –ø–µ—Ä–∏–æ–¥
    if (!r.isActive) continue;
    if (date < new Date(r.startDate)) continue;
    if (r.endDate && date > new Date(r.endDate)) continue;
    
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ø–∞–¥–∞–µ—Ç –ª–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–µ
    if (shouldOccurOnDate(r, date)) {
      if (r.type === 'income') {
        income += parseFloat(r.amount);
      } else {
        expense += parseFloat(r.amount);
      }
    }
  }
  
  return { income, expense };
}

function shouldOccurOnDate(
  r: RecurringTransaction, 
  date: Date
): boolean {
  const start = new Date(r.startDate);
  
  switch (r.frequency) {
    case 'daily':
      return true; // –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
    
    case 'weekly':
      // –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
      return date.getDay() === start.getDay();
    
    case 'monthly':
      // –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü –≤ —Ç–æ –∂–µ —á–∏—Å–ª–æ
      return date.getDate() === start.getDate();
    
    case 'yearly':
      // –∫–∞–∂–¥—ã–π –≥–æ–¥ –≤ —Ç—É –∂–µ –¥–∞—Ç—É
      return (
        date.getMonth() === start.getMonth() &&
        date.getDate() === start.getDate()
      );
  }
}
```

---

## 2Ô∏è‚É£ –ó–ê–ü–õ–ê–ù–ò–†–û–í–ê–ù–ù–´–ï –î–û–•–û–î–´

```
‚úÖ –¢–ê–ë–õ–ò–¶–ê –£–ñ–ï –ï–°–¢–¨!

// shared/schema.ts
export const plannedIncome = pgTable('planned_income', {
  id: serial('id').primaryKey(),
  userId: integer('user_id').references(() => users.id, { onDelete: 'cascade' }),
  
  amount: decimal('amount', { precision: 10, scale: 2 }).notNull(),
  currency: varchar('currency', { length: 3 }).default('USD'),
  description: text('description').notNull(),
  category: text('category'),
  
  expectedDate: text('expected_date').notNull(), // YYYY-MM-DD
  
  status: text('status').default('pending'), // 'pending' | 'received' | 'cancelled'
  
  transactionId: integer('transaction_id').references(() => dailyTransactions.id),
  receivedAt: timestamp('received_at'),
  
  source: text('source').default('manual'),
  notes: text('notes'),
  
  createdAt: timestamp('created_at').defaultNow(),
  updatedAt: timestamp('updated_at').defaultNow()
});

–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ –Ω–µ–¥–∞–≤–Ω–æ
‚úÖ Repository –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å (–µ—Å–ª–∏ –Ω–µ –≥–æ—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é)

–£–ß–ò–¢–´–í–ê–¢–¨:
‚úÖ –¢–æ–ª—å–∫–æ status = 'pending'
‚ùå –ù–ï —É—á–∏—Ç—ã–≤–∞—Ç—å 'received' (—É–∂–µ –ø–æ–ª—É—á–µ–Ω–æ)
‚ùå –ù–ï —É—á–∏—Ç—ã–≤–∞—Ç—å 'cancelled' (–æ—Ç–º–µ–Ω–µ–Ω–æ)

–ö–ê–ö –†–ê–°–°–ß–ò–¢–´–í–ê–¢–¨:
function getPlannedIncomeForDate(
  plannedIncomes: PlannedIncome[], 
  date: Date
): number {
  return plannedIncomes
    .filter(p => 
      p.status === 'pending' &&
      isSameDay(new Date(p.expectedDate), date)
    )
    .reduce((sum, p) => sum + parseFloat(p.amount), 0);
}
```

---

## 3Ô∏è‚É£ –ó–ê–ü–õ–ê–ù–ò–†–û–í–ê–ù–ù–´–ï –†–ê–°–•–û–î–´

```
‚ö†Ô∏è –¢–ê–ë–õ–ò–¶–ê –ï–°–¢–¨, –ù–û –ù–ê–ó–´–í–ê–ï–¢–°–Ø –ü–û-–î–†–£–ì–û–ú–£!

// shared/schema.ts
export const futurePurchases = pgTable('future_purchases', {
  id: serial('id').primaryKey(),
  userId: integer('user_id').references(() => users.id, { onDelete: 'cascade' }),
  partnerId: integer('partner_id').references(() => partners.id), // DEPRECATED
  
  name: text('name').notNull(),
  amount: decimal('amount', { precision: 10, scale: 2 }).notNull(),
  
  targetDate: text('target_date'), // YYYY-MM-DD (optional!)
  
  category: text('category'),
  priority: text('priority').default('medium'), // 'low' | 'medium' | 'high'
  notes: text('notes'),
  
  isPurchased: boolean('is_purchased').default(false),
  purchasedAt: timestamp('purchased_at'),
  
  createdAt: timestamp('created_at').defaultNow(),
  updatedAt: timestamp('updated_at').defaultNow()
});

–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
‚úÖ –¢–∞–±–ª–∏—Ü–∞ futurePurchases
‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –≤ "Planned Expenses"

–õ–û–ì–ò–ö–ê:
- –ï—Å–ª–∏ targetDate = null ‚Üí WISHLIST (–Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–≥–Ω–æ–∑–µ!)
- –ï—Å–ª–∏ targetDate != null ‚Üí PLANNED (—É—á–∏—Ç—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–≥–Ω–æ–∑–µ!)

–£–ß–ò–¢–´–í–ê–¢–¨:
‚úÖ –¢–æ–ª—å–∫–æ items –≥–¥–µ targetDate IS NOT NULL
‚úÖ –¢–æ–ª—å–∫–æ isPurchased = false
‚ùå –ù–ï —É—á–∏—Ç—ã–≤–∞—Ç—å wishlist (targetDate = null)

–ö–ê–ö –†–ê–°–°–ß–ò–¢–´–í–ê–¢–¨:
function getPlannedExpenseForDate(
  futurePurchases: FuturePurchase[], 
  date: Date
): number {
  return futurePurchases
    .filter(p => 
      p.targetDate !== null &&  // –Ω–µ wishlist
      !p.isPurchased &&
      isSameDay(new Date(p.targetDate), date)
    )
    .reduce((sum, p) => sum + parseFloat(p.amount), 0);
}
```

---

## 4Ô∏è‚É£ –ë–Æ–î–ñ–ï–¢–ù–´–ï –õ–ò–ú–ò–¢–´

```
‚úÖ –¢–ê–ë–õ–ò–¶–ê –£–ñ–ï –ï–°–¢–¨!

// shared/schema.ts
export const budgets = pgTable('budgets', {
  id: serial('id').primaryKey(),
  userId: integer('user_id').references(() => users.id, { onDelete: 'cascade' }),
  categoryId: integer('category_id').references(() => categories.id, { onDelete: 'cascade' }),
  
  limitAmount: decimal('limit_amount', { precision: 10, scale: 2 }).notNull(),
  
  period: text('period').default('month'), // 'day' | 'week' | 'month' | 'year'
  
  startDate: text('start_date'),
  endDate: text('end_date'),
  
  isActive: boolean('is_active').default(true),
  
  createdAt: timestamp('created_at').defaultNow(),
  updatedAt: timestamp('updated_at').defaultNow()
});

–†–ê–°–°–ß–ò–¢–´–í–ê–¢–¨:
–°—É–º–º–∏—Ä–æ–≤–∞—Ç—å –í–°–ï –ª–∏–º–∏—Ç—ã, –ø–µ—Ä–µ—Å—á–∏—Ç–∞–≤ –≤ –¥–Ω–µ–≤–Ω–æ–π —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç

–ö–ê–ö –†–ê–°–°–ß–ò–¢–´–í–ê–¢–¨:
function getDailyBudgetTotal(
  budgets: Budget[], 
  date: Date
): number {
  let total = 0;
  
  for (const b of budgets) {
    if (!b.isActive) continue;
    
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–∏–æ–¥
    if (b.startDate && date < new Date(b.startDate)) continue;
    if (b.endDate && date > new Date(b.endDate)) continue;
    
    // –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –≤ –¥–Ω–µ–≤–Ω–æ–π —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç
    const limit = parseFloat(b.limitAmount);
    
    switch (b.period) {
      case 'day':
        total += limit;
        break;
      case 'week':
        total += limit / 7;
        break;
      case 'month':
        total += limit / 30;
        break;
      case 'year':
        total += limit / 365;
        break;
    }
  }
  
  return total;
}

–ü–†–ò–ú–ï–†:
–ë—é–¥–∂–µ—Ç—ã:
‚îú‚îÄ "–ü—Ä–æ–¥—É–∫—Ç—ã": $1000/–º–µ—Å—è—Ü ‚Üí $33.33/–¥–µ–Ω—å
‚îú‚îÄ "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç": $500/–º–µ—Å—è—Ü ‚Üí $16.67/–¥–µ–Ω—å
‚îú‚îÄ "–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è": $300/–º–µ—Å—è—Ü ‚Üí $10.00/–¥–µ–Ω—å
‚îî‚îÄ –ò–¢–û–ì–û: $60/–¥–µ–Ω—å

–ï—Å–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –≥–∞–ª–æ—á–∫—É "–ë—é–¥–∂–µ—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã":
‚Üí expense += $60 –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
‚Üí –∑–∞ –º–µ—Å—è—Ü = $1800 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
```

---

## 5Ô∏è‚É£ –ë–ê–ó–û–í–´–ô –¢–†–ï–ù–î (AI –ü–†–û–ì–ù–û–ó)

```
–°–ï–ô–ß–ê–° –í –ö–û–î–ï:

// server/services/trend-calculator.service.ts

–î–í–ê –í–ê–†–ò–ê–ù–¢–ê (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è):

A) –°–ö–û–õ–¨–ó–Ø–©–ï–ï –°–†–ï–î–ù–ï–ï –ü–û –ò–°–¢–û–†–ò–ò:
const transactions = await getTransactions(userId, historyDays);

const avgIncome = transactions
  .filter(t => t.type === 'income')
  .reduce((sum, t) => sum + parseFloat(t.amount), 0) / historyDays;

const avgExpense = transactions
  .filter(t => t.type === 'expense')
  .reduce((sum, t) => sum + parseFloat(t.amount), 0) / historyDays;

B) AI –ü–†–û–ì–ù–û–ó (–ï–°–õ–ò ANTHROPIC API KEY):
const aiPrediction = await predictWithAI({
  history: transactions,
  anthropicApiKey: settings.anthropicApiKey
});

// AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª–µ–µ —É–º–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑
// —É—á–∏—Ç—ã–≤–∞—é—â–∏–π —Ç—Ä–µ–Ω–¥—ã, —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –∏ —Ç.–¥.

–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
const baseIncome = aiPrediction?.income || avgIncome;
const baseExpense = aiPrediction?.expense || avgExpense;

FALLBACK:
–ï—Å–ª–∏ –Ω–µ—Ç AI –∫–ª—é—á–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ
–ï—Å–ª–∏ –µ—Å—Ç—å AI –∫–ª—é—á ‚Üí AI –ø—Ä–æ–≥–Ω–æ–∑ (–ª—É—á—à–µ!)

–í –¢–í–û–Å–ú –°–õ–£–ß–ê–ï:
–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å AI –ø—Ä–æ–≥–Ω–æ–∑ (–≤–∏–∂—É –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Å–∏–Ω—é—é –ø—É–Ω–∫—Ç–∏—Ä–Ω—É—é)
‚Üí –ò—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É
‚Üí –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å –∫ –Ω–µ–π —Ñ–∏–ª—å—Ç—Ä—ã
```

---

## 6Ô∏è‚É£ I18N

```
–°–¢–†–£–ö–¢–£–†–ê i18n:

shared/i18n/
‚îú‚îÄ web-dashboard-charts.ts ‚úÖ (—É–∂–µ –µ—Å—Ç—å)
‚îî‚îÄ [–î–û–ë–ê–í–ò–¢–¨ –¢–£–î–ê –ñ–ï]

–ù–ï –ù–£–ñ–ù–û –°–û–ó–î–ê–í–ê–¢–¨ –û–¢–î–ï–õ–¨–ù–´–ô –ú–û–î–£–õ–¨!

–î–û–ë–ê–í–ò–¢–¨ –í web-dashboard-charts.ts:

export const webDashboardCharts = {
  en: {
    chart: {
      // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏...
      
      // –ù–û–í–û–ï: –§–∏–ª—å—Ç—Ä—ã –ø—Ä–æ–≥–Ω–æ–∑–∞
      forecastFilters: {
        title: "Include in forecast:",
        recurring: {
          title: "Recurring transactions",
          description: "Automatic income and expenses"
        },
        plannedIncome: {
          title: "Planned income",
          description: "Expected payments from clients"
        },
        plannedExpenses: {
          title: "Planned expenses",
          description: "Large purchases and payments"
        },
        budgetLimits: {
          title: "Budget limits (max expenses)",
          description: "Worst case scenario"
        }
      },
      
      // Warning
      budgetWarning: {
        title: "Warning: Risk of insufficient funds",
        description: "If you spend all budget limits, capital will go negative",
        recommendations: [
          "Lower budget limits",
          "Increase income",
          "Postpone large purchases"
        ]
      }
    }
  },
  
  ru: {
    chart: {
      // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏...
      
      // –ù–û–í–û–ï: –§–∏–ª—å—Ç—Ä—ã –ø—Ä–æ–≥–Ω–æ–∑–∞
      forecastFilters: {
        title: "–í–∫–ª—é—á–∏—Ç—å –≤ –ø—Ä–æ–≥–Ω–æ–∑:",
        recurring: {
          title: "–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏",
          description: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–æ—Ö–æ–¥—ã –∏ —Ä–∞—Å—Ö–æ–¥—ã"
        },
        plannedIncome: {
          title: "–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ—Ö–æ–¥—ã",
          description: "–û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤"
        },
        plannedExpenses: {
          title: "–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã",
          description: "–ö—Ä—É–ø–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –∏ –ø–ª–∞—Ç–µ–∂–∏"
        },
        budgetLimits: {
          title: "–ë—é–¥–∂–µ—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã (–º–∞–∫—Å. —Ä–∞—Å—Ö–æ–¥—ã)",
          description: "Worst case —Å—Ü–µ–Ω–∞—Ä–∏–π"
        }
      },
      
      // Warning
      budgetWarning: {
        title: "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –†–∏—Å–∫ –Ω–µ—Ö–≤–∞—Ç–∫–∏ —Å—Ä–µ–¥—Å—Ç–≤",
        description: "–ï—Å–ª–∏ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –≤—Å–µ –ª–∏–º–∏—Ç—ã, –∫–∞–ø–∏—Ç–∞–ª —É–π–¥—ë—Ç –≤ –º–∏–Ω—É—Å",
        recommendations: [
          "–°–Ω–∏–∑–∏—Ç—å –±—é–¥–∂–µ—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã",
          "–£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ—Ö–æ–¥—ã",
          "–û—Ç–ª–æ–∂–∏—Ç—å –∫—Ä—É–ø–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏"
        ]
      }
    }
  }
};

–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
import { useTranslation } from 'react-i18next';

const { t } = useTranslation('webDashboardCharts');

<h3>{t('chart.forecastFilters.title')}</h3>
```

---

## üìã –ò–¢–û–ì–û–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –î–ê–ù–ù–´–•

```
–ò–°–ü–û–õ–¨–ó–£–ï–ú –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –¢–ê–ë–õ–ò–¶–´:

‚úÖ recurring_transactions (—É–∂–µ –µ—Å—Ç—å)
   ‚îî‚îÄ –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   ‚îî‚îÄ –ù—É–∂–µ–Ω repository (–µ—Å–ª–∏ –Ω–µ—Ç)

‚úÖ planned_income (—Å–æ–∑–¥–∞–ª–∏ –Ω–µ–¥–∞–≤–Ω–æ)
   ‚îî‚îÄ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ—Ö–æ–¥—ã
   ‚îî‚îÄ Repository –≥–æ—Ç–æ–≤

‚úÖ future_purchases (—É–∂–µ –µ—Å—Ç—å)
   ‚îî‚îÄ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (–µ—Å–ª–∏ targetDate != null)
   ‚îî‚îÄ Wishlist (–µ—Å–ª–∏ targetDate = null)
   ‚îî‚îÄ Repository –≥–æ—Ç–æ–≤

‚úÖ budgets (—É–∂–µ –µ—Å—Ç—å)
   ‚îî‚îÄ –ë—é–¥–∂–µ—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   ‚îî‚îÄ Repository –≥–æ—Ç–æ–≤

–ù–ò–ß–ï–ì–û –ù–ï –ù–£–ñ–ù–û –°–û–ó–î–ê–í–ê–¢–¨!
–í–°–Å –£–ñ–ï –ï–°–¢–¨! ‚úÖ
```

---

## üéØ –§–ò–ù–ê–õ–¨–ù–û–ï –¢–ó (–° –£–¢–û–ß–ù–ï–ù–ò–Ø–ú–ò)

```
–ó–ê–î–ê–ß–ê: –î–û–ë–ê–í–ò–¢–¨ –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ï –§–ò–õ–¨–¢–†–´ –ü–†–û–ì–ù–û–ó–ê

BACKEND (1.5 —á–∞—Å–∞):

1. –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å repositories (–µ—Å–ª–∏ –Ω–µ—Ç):
   - RecurringTransactionsRepository
   - PlannedIncomeRepository (–¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å)
   - FuturePurchasesRepository (–¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å)
   - BudgetsRepository (–¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å)

2. –û–±–Ω–æ–≤–∏—Ç—å trend-calculator.service.ts:
   
   GET /api/analytics/trend?
     historyDays=30&
     forecastDays=365&
     includeRecurring=true&
     includePlannedIncome=true&
     includePlannedExpenses=true&
     includeBudgetLimits=false
   
   –õ–æ–≥–∏–∫–∞:
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –ø—Ä–æ–≥–Ω–æ–∑–∞:
     * –ë–∞–∑–æ–≤—ã–π —Ç—Ä–µ–Ω–¥ (AI –∏–ª–∏ —Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ)
     * + Recurring (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
     * + Planned Income (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
     * + Planned Expenses (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω, targetDate != null)
     * + Budget Limits (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω, daily equivalent)
   - –í–µ—Ä–Ω—É—Ç—å forecast —Å income/expense/capital

FRONTEND (1.5 —á–∞—Å–∞):

1. –°–æ–∑–¥–∞—Ç—å ForecastFilters –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (150 —Å—Ç—Ä–æ–∫)
2. –û–±–Ω–æ–≤–∏—Ç—å CapitalGrowthChart:
   - State –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
   - Query —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
3. Warning –µ—Å–ª–∏ capital < 0

I18N (15 –º–∏–Ω—É—Ç):
- –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏ –≤ web-dashboard-charts.ts

–ò–¢–û–ì–û: 3 —á–∞—Å–∞
```

---

**–í–°–Å –Ø–°–ù–û?** ‚úÖ

**–û–¢–ü–†–ê–í–ò–¢–¨ –§–ò–ù–ê–õ–¨–ù–û–ï –¢–ó –í REPLIT?** üöÄ