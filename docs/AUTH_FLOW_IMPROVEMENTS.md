# üîê –£–ª—É—á—à–µ–Ω–Ω—ã–π Flow –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è Telegram Mini App

**–î–∞—Ç–∞:** 2026-01-06  
**–¶–µ–ª—å:** –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Å–∞–Ω–∏–π, —É–ø–æ—Ä –Ω–∞ Telegram Mini App

---

## üìã –¢–µ–∫—É—â–∞—è –°–∏—Ç—É–∞—Ü–∏—è

### –ß—Ç–æ –µ—Å—Ç—å —Å–µ–π—á–∞—Å:
1. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ email/password
2. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Login Widget (–≤–µ–±)
3. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Mini App initData
4. ‚úÖ –°–≤—è–∑—ã–≤–∞–Ω–∏–µ Telegram —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º (`/api/auth/link-telegram`)
5. ‚ùå –ú–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ Telegram (–±–µ–∑ email)
6. ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞
7. ‚ùå –ù–µ—Ç email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

### –ü—Ä–æ–±–ª–µ–º—ã:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram ‚Üí –ø–æ—Ç–æ–º –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –≤–µ–±
- –ù–µ—Ç —á–µ—Ç–∫–æ–≥–æ flow –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- Mini App —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ email (–≤—Ä–µ–º–µ–Ω–Ω—ã–π email `{telegramId}@telegram.user`)

---

## üéØ –¶–µ–ª–µ–≤–æ–π Flow

### –ü—Ä–∏–Ω—Ü–∏–ø—ã:
1. **Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞)
2. **Telegram –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω** (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—Ö–æ–¥–∞)
3. **–ú–∏–Ω–∏–º—É–º –∫–∞—Å–∞–Ω–∏–π** - –º–∞–∫—Å–∏–º—É–º –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
4. **–£–º–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ** —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç

---

## üöÄ –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –°—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∞—è –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (Telegram Mini App)

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Mini App –≤ Telegram
   ‚Üì
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º initData ‚Üí –ø–æ–ª—É—á–∞–µ–º telegram_id
   ‚Üì
3. –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ telegram_id ‚Üí –ù–ï –ù–ê–ô–î–ï–ù
   ‚Üì
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!      ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç:          ‚îÇ
   ‚îÇ  [Email: ___________]        ‚îÇ
   ‚îÇ  [–ü–∞—Ä–æ–ª—å: ________]          ‚îÇ
   ‚îÇ  [–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å: ___]     ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  [–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç]          ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚Üì
5. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  ‚úÖ –ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω!         ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å         ‚îÇ
   ‚îÇ  Telegram –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ      ‚îÇ
   ‚îÇ  –≤—Ö–æ–¥–∞ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑?    ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  [–î–∞, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å]     ‚îÇ
   ‚îÇ  [–ü–æ–∑–∂–µ]                     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚Üì
6a. –ï—Å–ª–∏ "–î–∞":
    - –°–≤—è–∑—ã–≤–∞–µ–º telegram_id —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º
    - –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage: `telegramLinked: true`
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º: "‚úÖ –ì–æ—Ç–æ–≤–æ! –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –≤—Ö–æ–¥ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º"
    - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
   
6b. –ï—Å–ª–∏ "–ü–æ–∑–∂–µ":
    - –ù–ï —Å–≤—è–∑—ã–≤–∞–µ–º telegram_id
    - –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage: `telegramLinkPrompted: true`
    - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Å–∞–Ω–∏–π:** 4-5 (email, password, confirm password, –∫–Ω–æ–ø–∫–∞, –≤—ã–±–æ—Ä)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –õ–æ–≥–∏–Ω (Telegram Mini App) - Telegram –£–ñ–ï —Å–≤—è–∑–∞–Ω

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Mini App
   ‚Üì
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º initData ‚Üí –ø–æ–ª—É—á–∞–µ–º telegram_id
   ‚Üì
3. –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ telegram_id ‚Üí –ù–ê–ô–î–ï–ù + email –µ—Å—Ç—å
   ‚Üì
4. ‚úÖ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –í–•–û–î (0 –∫–∞—Å–∞–Ω–∏–π!)
   - –°–æ–∑–¥–∞–µ–º —Å–µ—Å—Å–∏—é
   - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Å–∞–Ω–∏–π:** 0 (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –õ–æ–≥–∏–Ω (Telegram Mini App) - Telegram –ù–ï —Å–≤—è–∑–∞–Ω

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Mini App
   ‚Üì
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º initData ‚Üí –ø–æ–ª—É—á–∞–µ–º telegram_id
   ‚Üì
3. –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ telegram_id ‚Üí –ù–ï –ù–ê–ô–î–ï–ù
   ‚Üì
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ª–æ–≥–∏–Ω–∞:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  üëã –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç         ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  [Email: ___________]        ‚îÇ
   ‚îÇ  [–ü–∞—Ä–æ–ª—å: ________]          ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  [–í–æ–π—Ç–∏]                    ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚Üì
5. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  ‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!          ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å         ‚îÇ
   ‚îÇ  Telegram –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ      ‚îÇ
   ‚îÇ  –≤—Ö–æ–¥–∞ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑?    ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  [–î–∞, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å]     ‚îÇ
   ‚îÇ  [–ü–æ–∑–∂–µ]                     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚Üì
6a. –ï—Å–ª–∏ "–î–∞":
    - –°–≤—è–∑—ã–≤–∞–µ–º telegram_id —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º
    - –°–æ—Ö—Ä–∞–Ω—è–µ–º: `telegramLinked: true`
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º: "‚úÖ –ì–æ—Ç–æ–≤–æ! –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –≤—Ö–æ–¥ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º"
    - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
   
6b. –ï—Å–ª–∏ "–ü–æ–∑–∂–µ":
    - –ù–ï —Å–≤—è–∑—ã–≤–∞–µ–º telegram_id
    - –°–æ—Ö—Ä–∞–Ω—è–µ–º: `telegramLinkPrompted: true`
    - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Å–∞–Ω–∏–π:** 3-4 (email, password, –∫–Ω–æ–ø–∫–∞, –≤—ã–±–æ—Ä)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –õ–æ–≥–∏–Ω (–í–µ–±-–≤–µ—Ä—Å–∏—è)

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–≤–µ—Ä—Å–∏—é
   ‚Üì
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ª–æ–≥–∏–Ω–∞:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  üëã –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç         ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  [Email: ___________]        ‚îÇ
   ‚îÇ  [–ü–∞—Ä–æ–ª—å: ________]          ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  [–í–æ–π—Ç–∏]                    ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  ‚îÄ‚îÄ‚îÄ –∏–ª–∏ ‚îÄ‚îÄ‚îÄ                ‚îÇ
   ‚îÇ                             ‚îÇ
   ‚îÇ  [–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram]     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚Üì
3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞:
   - –ï—Å–ª–∏ telegram_id –ù–ï —Å–≤—è–∑–∞–Ω:
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ  ‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!          ‚îÇ
     ‚îÇ                             ‚îÇ
     ‚îÇ  –•–æ—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å    ‚îÇ
     ‚îÇ  –∞–∫–∫–∞—É–Ω—Ç —Å Telegram?       ‚îÇ
     ‚îÇ                             ‚îÇ
     ‚îÇ  [–î–∞, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å]     ‚îÇ
     ‚îÇ  [–ü–æ–∑–∂–µ]                     ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   - –ï—Å–ª–∏ telegram_id —É–∂–µ —Å–≤—è–∑–∞–Ω:
     - –ü—Ä–æ—Å—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Å–∞–Ω–∏–π:** 3-4 (email, password, –∫–Ω–æ–ø–∫–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—ã–±–æ—Ä)

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–∏—Ç—å `/api/telegram/webapp-auth` (Mini App)

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º email

**–ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```typescript
router.post("/webapp-auth", async (req, res) => {
  const { initData } = req.body;
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è initData...
  const telegramId = telegramUser.id?.toString();
  
  // –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ telegram_id
  let [user] = await db.select()
    .from(users)
    .where(eq(users.telegramId, telegramId))
    .limit(1);
  
  if (user) {
    // –°—Ü–µ–Ω–∞—Ä–∏–π 2: Telegram —É–∂–µ —Å–≤—è–∑–∞–Ω ‚Üí –∞–≤—Ç–æ–ª–æ–≥–∏–Ω
    if (user.email && user.password) {
      req.login(user, (err) => {
        return res.json({ 
          success: true, 
          user,
          autoLogin: true 
        });
      });
    } else {
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç email ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è email
      return res.json({ 
        success: false,
        requiresEmail: true,
        message: 'Please add email to your account'
      });
    }
  } else {
    // –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
    return res.json({ 
      success: false,
      requiresRegistration: true,
      telegramId,
      telegramData: {
        firstName: telegramUser.first_name,
        username: telegramUser.username,
        photoUrl: telegramUser.photo_url
      }
    });
  }
});
```

---

### 2. –ù–æ–≤—ã–π Endpoint: `/api/auth/register-miniapp`

```typescript
router.post('/register-miniapp', async (req, res) => {
  const { email, password, telegramId, telegramData } = req.body;
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è email/password...
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ telegram_id –Ω–µ –∑–∞–Ω—è—Ç
  const existingTelegramUser = await db.select()
    .from(users)
    .where(eq(users.telegramId, telegramId))
    .limit(1);
  
  if (existingTelegramUser.length > 0) {
    return res.status(400).json({ 
      error: 'This Telegram account is already linked' 
    });
  }
  
  // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å email + password
  const [newUser] = await db.insert(users).values({
    email,
    password: await bcrypt.hash(password, 10),
    name: telegramData.firstName || email.split('@')[0],
    telegramId: null, // –ù–ï —Å–≤—è–∑—ã–≤–∞–µ–º —Å—Ä–∞–∑—É!
    telegramUsername: null,
    telegramFirstName: null,
    telegramPhotoUrl: null,
  }).returning();
  
  // –°–æ–∑–¥–∞–µ–º —Å–µ—Å—Å–∏—é
  req.login(newUser, (err) => {
    return res.json({
      success: true,
      user: newUser,
      shouldOfferTelegramLink: true, // –§–ª–∞–≥ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
      telegramId, // –ü–µ—Ä–µ–¥–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–∏–≤—è–∑–∫–∏
    });
  });
});
```

---

### 3. –ù–æ–≤—ã–π Endpoint: `/api/auth/link-telegram-miniapp`

```typescript
router.post('/link-telegram-miniapp', withAuth(async (req, res) => {
  const userId = req.user!.id;
  const { telegramId, initData } = req.body;
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è initData (–∫–∞–∫ –≤ webapp-auth)...
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ telegram_id –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  const existingUser = await db.select()
    .from(users)
    .where(eq(users.telegramId, telegramId))
    .limit(1);
  
  if (existingUser.length > 0 && existingUser[0].id !== userId) {
    return res.status(400).json({ 
      error: 'This Telegram account is already linked to another user' 
    });
  }
  
  // –°–≤—è–∑—ã–≤–∞–µ–º Telegram —Å —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  await db.update(users)
    .set({
      telegramId,
      telegramUsername: telegramUser.username || null,
      telegramFirstName: telegramUser.first_name || null,
      telegramPhotoUrl: telegramUser.photo_url || null,
    })
    .where(eq(users.id, userId));
  
  return res.json({
    success: true,
    message: 'Telegram account linked successfully',
  });
});
```

---

### 4. –û–±–Ω–æ–≤–∏—Ç—å Frontend: Mini App Detection

```typescript
// client/src/hooks/use-telegram-miniapp.ts
export function useTelegramMiniApp() {
  const [isMiniApp, setIsMiniApp] = useState(false);
  const [initData, setInitData] = useState<string | null>(null);
  const [telegramUser, setTelegramUser] = useState<any>(null);
  
  useEffect(() => {
    if (typeof window !== 'undefined' && window.Telegram?.WebApp) {
      const tg = window.Telegram.WebApp;
      setIsMiniApp(true);
      setInitData(tg.initData);
      setTelegramUser(tg.initDataUnsafe?.user);
      
      // –†–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
      tg.ready();
      tg.expand();
    }
  }, []);
  
  return { isMiniApp, initData, telegramUser };
}
```

---

### 5. –ù–æ–≤—ã–π –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `TelegramLinkPrompt`

```typescript
// client/src/components/auth/telegram-link-prompt.tsx
export function TelegramLinkPrompt({ 
  onAccept, 
  onDecline 
}: {
  onAccept: () => void;
  onDecline: () => void;
}) {
  return (
    <Dialog open={true}>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Telegram?</DialogTitle>
          <DialogDescription>
            –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –≤–≤–æ–¥–∞ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è
          </DialogDescription>
        </DialogHeader>
        
        <div className="flex gap-2">
          <Button onClick={onAccept} className="flex-1">
            –î–∞, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
          </Button>
          <Button onClick={onDecline} variant="outline" className="flex-1">
            –ü–æ–∑–∂–µ
          </Button>
        </div>
      </DialogContent>
    </Dialog>
  );
}
```

---

### 6. –û–±–Ω–æ–≤–∏—Ç—å Auth Page –¥–ª—è Mini App

```typescript
// client/src/pages/auth-page.tsx
export default function AuthPage() {
  const { isMiniApp, initData, telegramUser } = useTelegramMiniApp();
  const [showLinkPrompt, setShowLinkPrompt] = useState(false);
  const [pendingTelegramId, setPendingTelegramId] = useState<string | null>(null);
  
  useEffect(() => {
    if (isMiniApp && initData) {
      // –ü—ã—Ç–∞–µ–º—Å—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Mini App
      handleMiniAppAuth();
    }
  }, [isMiniApp, initData]);
  
  async function handleMiniAppAuth() {
    const response = await fetch('/api/telegram/webapp-auth', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ initData }),
      credentials: 'include',
    });
    
    const data = await response.json();
    
    if (data.autoLogin) {
      // –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–≤—Ç–æ–ª–æ–≥–∏–Ω
      window.location.href = '/app/dashboard';
    } else if (data.requiresRegistration) {
      // –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
      setShowRegistration(true);
      setPendingTelegramId(data.telegramId);
    } else if (data.requiresEmail) {
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è email
      setShowEmailForm(true);
    }
  }
  
  async function handleRegister(data: RegisterData) {
    const response = await registerMutation.mutateAsync({
      ...data,
      telegramId: pendingTelegramId,
    });
    
    if (response.shouldOfferTelegramLink) {
      setPendingTelegramId(response.telegramId);
      setShowLinkPrompt(true);
    }
  }
  
  async function handleLinkTelegram() {
    if (!initData || !pendingTelegramId) return;
    
    await fetch('/api/auth/link-telegram-miniapp', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ 
        telegramId: pendingTelegramId,
        initData 
      }),
      credentials: 'include',
    });
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
    localStorage.setItem('telegramLinked', 'true');
    
    toast({
      title: '‚úÖ –ì–æ—Ç–æ–≤–æ!',
      description: '–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –≤—Ö–æ–¥ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º',
    });
    
    setShowLinkPrompt(false);
    window.location.href = '/app/dashboard';
  }
  
  return (
    <>
      {/* –û–±—ã—á–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–ª–æ–≥–∏–Ω–∞ */}
      {/* ... */}
      
      {/* –ü—Ä–æ–º–ø—Ç –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è Telegram */}
      {showLinkPrompt && (
        <TelegramLinkPrompt
          onAccept={handleLinkTelegram}
          onDecline={() => {
            localStorage.setItem('telegramLinkPrompted', 'true');
            setShowLinkPrompt(false);
            window.location.href = '/app/dashboard';
          }}
        />
      )}
    </>
  );
}
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–æ –∏ –ü–æ—Å–ª–µ

| –°—Ü–µ–Ω–∞—Ä–∏–π | –î–æ | –ü–æ—Å–ª–µ |
|----------|-----|-------|
| **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (Mini App)** | 1 –∫–∞—Å–∞–Ω–∏–µ (Telegram) | 4-5 –∫–∞—Å–∞–Ω–∏–π (email + password + –≤—ã–±–æ—Ä) |
| **–õ–æ–≥–∏–Ω (Mini App, —Å–≤—è–∑–∞–Ω)** | 1 –∫–∞—Å–∞–Ω–∏–µ | **0 –∫–∞—Å–∞–Ω–∏–π** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!) |
| **–õ–æ–≥–∏–Ω (Mini App, –Ω–µ —Å–≤—è–∑–∞–Ω)** | 1 –∫–∞—Å–∞–Ω–∏–µ (Telegram) | 3-4 –∫–∞—Å–∞–Ω–∏—è (email + password + –≤—ã–±–æ—Ä) |
| **–õ–æ–≥–∏–Ω (–í–µ–±)** | 2 –∫–∞—Å–∞–Ω–∏—è (email + password) | 2-3 –∫–∞—Å–∞–Ω–∏—è (email + password + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—ã–±–æ—Ä) |

**–ò—Ç–æ–≥–æ:** –î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Mini App - **0 –∫–∞—Å–∞–Ω–∏–π** –≤–º–µ—Å—Ç–æ 1! üéâ

---

## üé® UI/UX –£–ª—É—á—à–µ–Ω–∏—è

### 1. –£–º–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:**
- ‚úÖ –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ (–µ—Å–ª–∏ Telegram –Ω–µ —Å–≤—è–∑–∞–Ω)
- ‚ùå –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –æ—Ç–∫–ª–æ–Ω–∏–ª (–ø—Ä–æ–≤–µ—Ä—è—Ç—å `telegramLinkPrompted`)

**–ö–æ–≥–¥–∞ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:**
- ‚ùå –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å–≤—è–∑–∞–ª Telegram
- ‚ùå –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª–æ–Ω–∏–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–Ω–µ–µ (–º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑—å—é —Å Telegram

```typescript
// client/src/pages/settings/index.tsx
export function TelegramAccountSettings() {
  const { user } = useAuth();
  const [isLinked, setIsLinked] = useState(!!user.telegramId);
  
  return (
    <Card>
      <CardHeader>
        <CardTitle>Telegram –∞–∫–∫–∞—É–Ω—Ç</CardTitle>
        <CardDescription>
          {isLinked 
            ? '–í–∞—à –∞–∫–∫–∞—É–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å Telegram'
            : '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—Ö–æ–¥–∞'}
        </CardDescription>
      </CardHeader>
      <CardContent>
        {isLinked ? (
          <div className="space-y-4">
            <div className="flex items-center gap-2">
              <CheckCircle className="h-5 w-5 text-green-500" />
              <span>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: @{user.telegramUsername}</span>
            </div>
            <Button 
              variant="destructive" 
              onClick={handleUnlink}
            >
              –û—Ç–≤—è–∑–∞—Ç—å Telegram
            </Button>
          </div>
        ) : (
          <Button onClick={handleLink}>
            –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Telegram
          </Button>
        )}
      </CardContent>
    </Card>
  );
}
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è initData
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ (hash)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–µ–∂–µ—Å—Ç–∏ (auth_date < 24 —á–∞—Å–æ–≤)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ bot token

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ telegram_id –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ email —É–Ω–∏–∫–∞–ª–µ–Ω

### 3. –°–µ—Å—Å–∏–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã —Å–µ—Å—Å–∏–π (Passport.js)
- ‚úÖ HttpOnly cookies
- ‚úÖ SameSite protection

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Backend:
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `/api/telegram/webapp-auth` - –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `/api/auth/register-miniapp` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º telegram_id
- [ ] –°–æ–∑–¥–∞—Ç—å `/api/auth/link-telegram-miniapp` - —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–ª–æ–≥–∏–Ω–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é: email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ telegram_id

### Frontend:
- [ ] –°–æ–∑–¥–∞—Ç—å `useTelegramMiniApp` hook
- [ ] –°–æ–∑–¥–∞—Ç—å `TelegramLinkPrompt` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `AuthPage` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Mini App flow
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ localStorage
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑—å—é —Å Telegram

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] –¢–µ—Å—Ç: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Mini App
- [ ] –¢–µ—Å—Ç: –ê–≤—Ç–æ–ª–æ–≥–∏–Ω —á–µ—Ä–µ–∑ Mini App (—Å–≤—è–∑–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç)
- [ ] –¢–µ—Å—Ç: –õ–æ–≥–∏–Ω —á–µ—Ä–µ–∑ Mini App (–Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–π)
- [ ] –¢–µ—Å—Ç: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç: –û—Ç–≤—è–∑–∫–∞ Telegram

---

## üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **P0 (–ö—Ä–∏—Ç–∏—á–Ω–æ):**
   - –û–±–Ω–æ–≤–∏—Ç—å `/api/telegram/webapp-auth` - –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –°–æ–∑–¥–∞—Ç—å `/api/auth/register-miniapp`
   - –û–±–Ω–æ–≤–∏—Ç—å `AuthPage` –¥–ª—è Mini App flow

2. **P1 (–í–∞–∂–Ω–æ):**
   - –°–æ–∑–¥–∞—Ç—å `/api/auth/link-telegram-miniapp`
   - –°–æ–∑–¥–∞—Ç—å `TelegramLinkPrompt` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
   - –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑—å—é

3. **P2 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ):**
   - –£–ª—É—á—à–∏—Ç—å UI –ø—Ä–æ–º–ø—Ç–∞
   - –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É (—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–≤—è–∑—ã–≤–∞—é—Ç Telegram)
   - –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ò–¥–µ–∏

### 1. –£–º–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–æ–≥–∏–Ω–∏—Ç—Å—è 3+ —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–æ–≥–∏–Ω–∏—Ç—Å—è —Ä–µ–¥–∫–æ ‚Üí –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å

### 2. QR-–∫–æ–¥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–∏–≤—è–∑–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å QR-–∫–æ–¥ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ Telegram ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞

### 3. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: "–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Telegram –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—Ö–æ–¥–∞"
- –ß–µ—Ä–µ–∑ 3 –¥–Ω—è –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ —Å Telegram - —ç—Ç–æ –∑–∞–π–º–µ—Ç 10 —Å–µ–∫—É–Ω–¥"

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –û–±—Å—É–∂–¥–µ–Ω–∏—è

1. **Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:** –ù—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –±—É–¥—É—â–µ–º? (—Å–µ–π—á–∞—Å –Ω–µ—Ç)
2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è:** –ö–∞–∫ –¥–µ–ª–∞—Ç—å –±–µ–∑ email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è? (SMS —á–µ—Ä–µ–∑ Telegram?)
3. **–ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑?
4. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ email:** –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ Telegram ID? (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
5. **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram?

---

**–ì–æ—Ç–æ–≤ –æ–±—Å—É–¥–∏—Ç—å –∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å! üöÄ**

